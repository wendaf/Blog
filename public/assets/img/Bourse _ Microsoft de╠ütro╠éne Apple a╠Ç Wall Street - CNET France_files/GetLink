!function(t,n,o){var r=t.invibes=t.invibes||{};t.location.href.match(/\bbvci|\bbvid/i)&&(r.testMode=!0),r.isTablet=!1,r.deviceType=r.isTablet?4:1;var s={videoAdDomain:"//content.videostep.com",bidAdDomain:"//bid.videostep.com",videoAdCss:"//static.r66net.com/Content/dvad3.css",uwebDomain:"//u.videostep.com/User",ewebUrl:"//paid.invibes.com",sewebUrl:"//invibes.b26net.com",statwebUrl:"https://s.videostep.com",kwebstatUrl:"https://kwebstat.videostep.com",getlink:"//static.r66net.com/d_eu/gl18.19.1.js",krpanojs:"//static.r66net.com/Scripts/krpano/krpano.js",gyrojs:"//static.r66net.com/Scripts/krpano/gyro2.js",videoplayerjs:"//static.r66net.com/Scripts/krpano/videoplayer.js",followmousejs:"//static.r66net.com/Scripts/krpano/followmouse.js"},a={0:"https://bk.madamebuzz.fr/beacon.html",1:"https://bk.futura-sciences.com/beacon.html"};if(frameElement)!function(e){var i=function(t){e.parentElement.insertBefore(t,e)},n=function(e){var t=o.querySelectorAll(e);Array.prototype.forEach.call(t,function(e){e.parentElement.removeChild(e),i(e)})};n("[id^=divVideoStep]"),n("[id^=_videoStep]"),n("[id^=ivbs]");var a=o.createElement("script");if(a.type="text/javascript",a.async=!0,null!=r.getlinkUrl&&""!==r.getlinkUrl?a.src=r.getlinkUrl:a.src=s.getlink,i(a),r){var d=t.parent.invibes=t.parent.invibes||{};Object.keys(r).forEach(function(e){r.hasOwnProperty(e)&&(d[e]=r[e])})}}(frameElement);else if(r.alreadyRun)console.warn("IVBS Script run twice!");else{r.alreadyRun=!0,function(e){function t(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(e,this)}function n(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(e){return void r(t.promise,e)}o(t.promise,n)}else(1===e._state?o:r)(t.promise,e._value)}))}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void a(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,s(e)}catch(t){r(e,t)}}function r(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)n(e,e._deferreds[t]);e._deferreds=null}function a(e,t){var i=!1;try{e(function(e){i||(i=!0,o(t,e))},function(e){i||(i=!0,r(t,e))})}catch(e){if(i)return;i=!0,r(t,e)}}var d=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,i){var o=new this.constructor(t);return n(this,new function(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}(e,i,o)),o},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,i){function n(r,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){n(r,e)},i)}t[r]=s,0==--o&&e(t)}catch(e){i(e)}}if(0===t.length)return e([]);for(var o=t.length,r=0;r<t.length;r++)n(r,t[r])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,i){i(e)})},i.race=function(e){return new i(function(t,i){for(var n=0,o=e.length;n<o;n++)e[n].then(t,i)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){d(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=i:e.Promise||(e.Promise=i)}(this);var d=function(){return n.window.location.href.substring(0,300).split(/[?#]/)[0]},l=function(e,t,i){return e+(e.indexOf("?")<0?"?":"&")+t+"="+i},c=function(e,t){var i=e;if(t)for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];null==o&&(o=""),i=l(i,encodeURIComponent(n),encodeURIComponent(o))}return i},u=function(){return Math.round(1e12*Math.random()).toString(36).substring(0,10)};r.jsonp=function(e,t){var i="cb_"+u(),n=o.createElement("script");n.src=l(e,"callback","invibes."+i),r[i]=t||p,o.head.appendChild(n)},r.jsonpWithParams=function(e,t,i){r.jsonp(c(e,t),i)},r.pixel=function(e,t){var i=new Image;return new Promise(function(n,o){i.addEventListener("load",n),i.addEventListener("error",o),i.src=c(e,t)})};var v=function(e){return Object.keys(e).map(function(t){var i=e[t];return[t,i=null!=i?i.toString():""].map(encodeURIComponent).join("=")}).join("&")},f=function(e,t){var i=function(e){var t=(e=e||"").match(/\/\/[^\/]+/);return t?t[0]:""};return i(e.origin||e.originalEvent.origin||"").toLowerCase()===i(t).toLowerCase()};r.Uid={generate:function(){var e=parseInt("zzzzzz",36),t=function(){return Math.floor(Math.random()*e).toString(36)};return t()+t()}};var p=function(){},m=!1;try{m=localStorage&&localStorage.InvibesDEBUG}catch(e){}var g,h=m?t.console:{info:p,error:p,log:p,warn:p,debug:p};m&&h.info("IV DEBUG ON."),r.getCookie=function(e){var t,i,n,r=o.cookie.split(";");for(t=0;t<r.length;t++)if(i=r[t].substr(0,r[t].indexOf("=")),n=r[t].substr(r[t].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))===e)return unescape(n)},r.setCookie=function(e,t,i,n){var s="ivNoCookie"==e||"IvbsCampIdsLocal"==e;if(!(r.noCookies&&!s&&(i||0)>=0)){i>365&&(i=365),n=n||g;var a=new Date,d=24*i*60*60*1e3;a.setTime(a.getTime()+d);var l=t+(i?"; expires="+a.toUTCString():"");l+=";domain="+n+";path=/",o.cookie=e+"="+l}},r.deleteLocalCookies=function(){"IvbsCampIdsLocal|VSVASuspended|ivNotCD|VsLLocal|ivbss|ivbsdid|ivBlk|ivOptIn|ivvbks".split("|").forEach(function(e){r.setCookie(e,"",-1)})};var y;g=function(){var e=r.Uid.generate(),t=location.hostname.split(".");if(1===t.length)return location.hostname;for(var i=t.length-1;i>=0;i--){var n="."+t.slice(i).join(".");if(r.setCookie(e,e,1,n),r.getCookie(e)===e)return r.setCookie(e,e,-1,n),n}}(),h.info("cd:"+g),r.noCookies=r.getCookie("ivNoCookie"),r.optIn=parseInt(r.getCookie("ivOptIn"))||0,null!=t.__cmp&&t.__cmp("getVendorConsents",[436],function(e){var t,i,n=function(e){if(null==e)return 0;if(!e.gdprApplies||e.hasGlobalConsent)return 2;if(e.purposeConsents instanceof Array){if(e.purposeConsents.length<5)return 0;for(var t=0;t<5&&t<e.purposeConsents.length;t++)if(!1===e.purposeConsents[t]||"false"===e.purposeConsents[t]||null==e.purposeConsents[t])return 0}else{if("object"!=typeof e.purposeConsents||null===e.purposeConsents)return 0;for(var i in t=0,e.purposeConsents){if(5===t)break;if(e.purposeConsents.hasOwnProperty(i)&&(t++,!1===e.purposeConsents[i]||"false"===e.purposeConsents[i]||null==e.purposeConsents[i]))return 0}if(t<5)return 0}return null==e.vendorConsents||1!=e.vendorConsents[436]?4:2}(e);if(n>0){var o=10*n;r.noCookies=0,r.setCookie("ivNoCookie",0,-1),r.optIn=(t=r.optIn,i=n,t<=0?i:i<=0?t:t<i?t:i),1!==r.optIn&&r.setCookie("ivOptIn",o,.007)}});var b=0,E=function(e){if(!e.length)return h.log("Blocker NOT detected."),void r.setCookie("ivBlk","n",1);var i=r.getCookie("ivBlk");if(i)return h.log("Blocker test: "+i),void(y="y"===i);var n=e.shift();h.log("Testing... "+n),r.pixel(n,{xyzNoCache:Math.floor(1e12*Math.random()).toString(36)}).then(function(){t.setTimeout(function(){E(e)},1e3)},function(){h.log("Blocker detected! "+n),++b>=3?(y=!0,r.setCookie("ivBlk","y",1)):t.setTimeout(function(){E(e)},2e3)})};E(["https://stats.g.doubleclick.net/r/collect","https://www.google-analytics.com/collect","https://pixel.adsafeprotected.com/","https://cisco.sc.omtrdc.net/b/ss/cisco-complete/1/JS-2.6.0/s22097838216706","https://bvt.r66net.com/1x1.gif","https://box.r66net.com/1x1.gif","https://video.r66net.com/1x1.gif","https://kwebstat.videostep.com/stat/pixel","https://paid.invibes.com/Redir/Pixel"]);var k=Event;navigator.userAgent.match(/MSIE |Trident/i)&&((k=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=o.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}).prototype=t.Event.prototype),r.setAttr=function(e,t){if(e)if(e instanceof Array)e.forEach(function(e){e instanceof Array&&r.setAttr.apply(r,e)});else{if(h.info("%cOPT: "+e+" = %c"+t,"color:#44f;","color:#494"),"noCookies"===e)return r.setCookie("ivNoCookie",1,365),void(r.noCookies=1);if("forget"===e)return r.deleteLocalCookies(),D.clear(p),r.dom.id&&r.sendStatwebStats(11003,r.dom.id),r.noCookies=1,r.optIn=0,void r.setCookie("ivNoCookie",1,365);if("opt-in"===e)return r.setCookie("ivOptIn",1,365),r.setCookie("ivNoCookie",0,-1),r.optIn=1,void(r.noCookies=0);if("opt-out"===e)return r.setCookie("ivOptIn",-1,365),void(r.optIn=-1);if("login"===e||"puid"===e){if(r.optIn<=0)return;if(null==t)return;return void r.sendStatwebStats(11002,t)}}},t.dispatchEvent(new k("ivbsinit"));var C=r.testConfiguration||{};Object.keys(s).forEach(function(e){s.hasOwnProperty(e)&&C[e]&&(s[e]=C[e])}),r.uwebDomain=s.uwebDomain;var w="VSVASuspended";r.headerHeight=r.headerHeight||0,r.footerHeight=r.footerHeight||0,Array.prototype.findIndex||(Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t}),ke(r),function(e){if(!r.dom){var t,i={cname:"ivbsdid",load:function(){var e=r.getCookie(this.cname)||"";try{return JSON.parse(e)}catch(e){}},save:function(e){r.setCookie(this.cname,JSON.stringify(e),365)}},n=(e=e||{}).persistence||i;(t=n.load()||{id:r.Uid.generate(),cr:(new Date).getTime(),hc:1}).id.match(/\./)&&(t.id=r.Uid.generate());var o=function(){t.cr&&(delete t.cr,delete t.hc,n.save(t),s())},s=function(){r.dom={get id(){return!t.cr&&r.optIn>0?t.id:void 0},get tempId(){return r.optIn>0?t.id:void 0},graduate:o}};t.cr&&!e.noVisit&&(t.hc<7&&t.hc++,(t.hc>=7&&function(e){return!!e.cr&&(!(e.cr<151e10)&&(new Date).getTime()-e.cr>864e5)}(t)||e.skipGraduation)&&o()),n.save(t),s(),h.info("Did="+r.dom.id)}}(),r.visitId=r.visitId||u();r.setCookie("ivbss",r.getCookie("ivbss")||u());var I,A;if(null==r.bidResponse)(new function(){var e=Math.floor((new Date).getTime()/864e5),i=function(){var t,i,n=(t=r.getCookie("ivvbks")||"",i={},t.split("|").forEach(function(t){var n=t.split("."),o=parseInt(n[0],10);!isNaN(o)&&o+3>e&&(n[1]||"").split(",").forEach(function(e){i[e]=o})}),i),o=[];if(Object.keys(a).forEach(function(e){!a.hasOwnProperty(e)||n[e]||a[e].indexOf(g)>=0||o.push({idx:e,url:a[e]})}),o.length){var s,d=(s=o)[Math.floor(Math.random()*s.length)];return n[d.idx]=e,function(e){var t={};Object.keys(e).forEach(function(i){if(e.hasOwnProperty(i)){var n=e[i];t[n]=t[n]||[],t[n].push(i)}});var i=Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}).map(function(e){return e+"."+t[e].join(",")}).join("|");r.setCookie("ivvbks",i,3)}(n),d.url}h.warn("No BK available")},n=function(e){var i,n;h.log("BK start:"+e);var r=function(e){var t=o.createElement("iframe");return t.src=e,t.style.width=0,t.style.height=0,t.frameBorder=0,o.body.appendChild(t),t}(e),s=function(){r&&(t.removeEventListener("message",n),r.parentElement.removeChild(r),r=null)},a=new Promise(function(n){t.setTimeout(function(){i||h.warn("BK timeout: "+e),s(),n()},3e3)}),d=new Promise(function(o){n=function(t){t.data.ivbxx&&(i=1,s(),o(t.data.id),h.info("BK OK: "+e))},t.addEventListener("message",n)});return Promise.race([a,d])},s=function(e,o){if(g&&!r.noCookies&&!(r.optIn<=0)){var a=i();a&&n(a).then(function(i){i&&(r.dom.graduate(),r.sendStatwebStats(11001,r.dom.id+"."+i)),e>1&&t.setTimeout(function(){s(e-1,o)},o)})}};this.run=s}).run(3,1e3);r.visibilityAPI=(A="",void 0!==o.hidden?(I="hidden",A="visibilitychange"):void 0!==o.mozHidden?(I="mozHidden",A="mozvisibilitychange"):void 0!==o.msHidden?(I="msHidden",A="msvisibilitychange"):void 0!==o.webkitHidden&&(I="webkitHidden",A="webkitvisibilitychange"),{eventName:A,isVisible:function(){return!!r.FullscreenApi().recentlyChanged||!o[I]}}),function(){r.handlers=r.handlers||[],r.trySetStatus=function(e){var t=!0;if(this.statusCode!==e.code){switch(e.code){case 0:1===this.statusCode&&(t=!1);break;case-1:void 0!==this.statusCode&&(t=!1);break;case 1:0!==this.statusCode&&1!==this.statusCode||(t=!1)}t?(h.info("IvStatus changed from ["+this.statusCode+"] to ["+e.code+"]."),this.statusCode=e.code,this.handlers.forEach(function(t){"function"==typeof t&&t.call(e)})):h.log("Warning: Trying to change status from ["+this.statusCode+"] to ["+e.code+"].")}};var e=r.localize=function(e){return this.localize.currentDict[e]||e};e.dictionaries={en:{close:"Close",loading:"Loading... Please wait",suspend:"Hide this Ad",about:"About Invibes advertising",aboutCookies:"About cookies",cookieDescription:"We may transmit one or more cookies, small text files containing alphanumeric characters that uniquely identify the web browser. This is used to track your usage patterns on our affiliate websites in a non-personally identifiable manner.",clearCookies:"Click here to delete all your cookie history",cookiesDeleted:"Your cookie history will be deleted.",cookiePolicy:"Read more about our Terms"},fr:{close:"Fermer",loading:"Chargement en cours, merci de patienter...",suspend:"Masquer cette publicité",about:"À propos de Invibes advertising",aboutCookies:"À propos des cookies",cookieDescription:"Nous pouvons transmettre un ou plusieurs cookies sous forme de petits fichiers texte contenant des caractères alphanumériques qui identifient votre navigateur Internet.  Ils sont utilisés pour suivre des habitudes d’utilisation sur nos sites partenaires, de manière non personnellement identifiable.",clearCookies:"Cliquer ici pour supprimer vos cookies",cookiesDeleted:"Votre historique de cookies sera supprimé.",cookiePolicy:"Lire notre politique sur les cookies"},de:{close:"Schliessen",loading:"Laden... Bitte warten",suspend:"Diese Werbung ausblenden",about:"Über Invibes advertising",aboutCookies:"Über Cookies",cookieDescription:"Wir können ein oder mehrere Cookies, kleine Textdateien mit alphanumerischen Zeichen übertragen, die einmalig den Web-Browser identifizieren. Dies wird verwendet, um Ihr Internetnutzungsverhalten auf unserer Partner-Websites in einer nicht-personenbezogene Weise zu verfolgen.",clearCookies:"Hier klicken, um alle Cookies zu löschen",cookiesDeleted:"Die Cookies werden gelöscht werden.",cookiePolicy:"Mehr lesen über die AGB"},es:{close:"Cerrar",loading:"Cargando... por favor, espere",suspend:"Oculta este anuncio",about:"Sobre Invibes advertising",aboutCookies:"Sobre las cookies",cookieDescription:"Podemos transmitir una o más cookies, pequeños archivos de texto que contienen caracteres alfanuméricos que identifican el navegador web. Esto se utiliza para realizar un seguimiento de los patrones de uso de los sitios de afiliados de forma no personal.",clearCookies:"Haga click aquí para borrar todo su historial de cookies",cookiesDeleted:"Su historial de cookies se va a borrar.",cookiePolicy:"Más información sobre nuestros términos"},ru:{close:"Закрыть",loading:"Загрузка... Пожалуйста, ожидайте",suspend:"Скрыть это объявление",about:"Об Invibes",aboutCookies:"О Cookies",cookieDescription:"Мы можем передавать один и более cookies, небольшие текстовые файлы, содержащие наборы символов для уникальной идентификации веб браузером. Это используется для того, чтобы отслеживать посещение сайтов наших партнеров, без использования персональных данных.",clearCookies:"Нажмите здесь, чтобы очистить историю cookie",cookiesDeleted:"Ваша история cookie очищена.",cookiePolicy:"Узнать больше о нашей Политике Безопасности"},it:{close:"Chiudi",loading:"Attendere... Caricamento in corso",suspend:"Nascondi questo annuncio",about:"A proposito di Invibes advertising",aboutCookies:"A proposito di cookies",cookieDescription:"Questo sito utilizza i cookie per migliorare servizi ed esperienza dei lettori ed inviare pubblicità. Se decidi di continuare la navigazione consideriamo che accetti il loro uso.",clearCookies:"Clicca qui per cancellare tutta la cronologia dei cookie",cookiesDeleted:"La vostra storia cookie viene cancellata.",cookiePolicy:"Leggere di più sui nostri Termini"},nl:{close:"Sluiten",loading:"Laden... Ogenblik aub",suspend:"Verberg deze reklame",about:"Over Invibes advertising",aboutCookies:"Cookies beleid",cookieDescription:"We kunnen mogelijks één of meerdere cookies doorsturen. Dit zijn kleine text files met alpha numerieke waarden die uw browser uniek identificeren. Deze worden gebruikt om de gewoonten van gebruikers op te volgen op onze partner websites, op een niet-identificeerbare en onpersoonlijke wijze.",clearCookies:"Verwijder mijn cookie geschiedenis",cookiesDeleted:"Uw cookie geschiedenis zal worden verwijderd.",cookiePolicy:"Lees onze gebruikersvoorwaarden"},pt:{close:"Fechar",loading:"Carregando... Favor aguardar",suspend:"Esconder este anuncio",about:"Sobre Invibes Advertising",aboutCookies:"Sobre cookies",cookieDescription:"Poderemos transferir um ou mais cookies, pequenos arquivos de texto contendo caracteres alfa-numéricos que identificam o web browser de forma única. Isto é usado para registrar seu padrão de uso em websites afiliados, de maneira anônima e não identificável.",clearCookies:"Clique aqui para apagar todo seu histórico de cookies",cookiesDeleted:"Seu histórico de cookies será apagado.",cookiePolicy:"Leia mais sobre nossos Termos"}},e.defaultDict=e.dictionaries.en,e.usingLanguage=function(e){e&&(this.currentLanguage=e.toLowerCase(),this.currentDict=this.dictionaries[this.currentLanguage]||this.defaultDict)},e.usingLanguage("en"),r.localizeDom=function(e){"string"==typeof e&&(e=o.getElementById(e)),e=e||o.body;var t=e.querySelectorAll("[data-res-id]");Array.prototype.forEach.call(t,function(e){var t=e.getAttribute("data-res-id");e.textContent=r.localize(t)})}}(),t.addEventListener("scroll",function(){r.dispatchEvent("scroll"),r.dispatchEvent("scrollresize")}),t.addEventListener("resize",function(){r.dispatchEvent("scrollresize")}),r.getClientVerticalVisibilityPercent=function(e){if(e.forcedVisibilityPercent)return e.forcedVisibilityPercent;var i=e.getBoundingClientRect(),n=Math.max(r.headerHeight,i.top),o=Math.min(t.innerHeight-r.footerHeight,i.bottom);return i.height<1?0:Math.max(0,Math.round(100*(o-n)/i.height))};var L,S,T,P,V,D=(L=[r.uwebDomain],S=!r.getCookie("ivNotCD"),T=L.map(function(e){var t,i={};return i.get=function(i,n){if(!S)return h.info("Not CD..."),void i({});var o=e+"/GetIvId";r.dom.id&&(o=l(o,"k",1)),n&&(o=l(o,"idToSet",n)),r.jsonp(o,function(e){e.mustRetry?(h.log("retrying..."),o=l(o,"retry",1),r.jsonp(o,function(e){e.notCD&&(h.warn("Set as not CD!"),S=!1,r.setCookie("ivNotCD","y",365)),t=e.id,i(e)})):(t=e.id,i(e))})},i.set=function(e,n){n&&t===n?e({}):i.get(e,n)},i.clear=function(t){r.jsonp(e+"/NoIvId",t)},i}),{detectUserId:function(e){if(r.noCookies||r.optIn<=0)e&&e();else if(t.ivbsIdLess)e();else{var i=!1;t.setTimeout(function(){i||(h.warn("Cookie mechanism timeout/error."),e())},1e3),P.getId(function(t){i=!0,r.id=t.id,t.k&&r.dom.graduate(),h.info("CDid="+r.id),e()})}},clear:(P={getId:function(e){var t=0,i=function(){var n=T[t];n?n.get(function(n){n.id?(e(n),T.forEach(function(e){e.set(p,n.id)})):(t++,i())}):e({})};i()},clear:function(e){delete r.id;var t=T.length,i=function(){0==--t&&e()};T.forEach(function(e){e.clear(i)})}}).clear}),x=new function(e){(e=e||{}).getTime=e.getTime||function(){return(new Date).getTime()};var t=function(){try{return JSON.parse(localStorage.getItem("ivvcap"))||{}}catch(e){return{}}},i=function(e){try{localStorage.setItem("ivvcap",JSON.stringify(e))}catch(e){}};this.registerView=function(n,o){var r,s=t(),a=s[n]||[0,e.getTime()+(r=o,3600*r*1e3)];s[n]=[a[0]+1,a[1]],i(s)},this.getCappedCampaigns=function(){!function(){var n=e.getTime(),o=t(),r=!1;Object.keys(o).forEach(function(e){o[e][1]<=n&&(delete o[e],r=!0)}),r&&i(o)}();var n=t();return Object.keys(n).filter(function(e){return n.hasOwnProperty(e)}).sort().map(function(e){return[e,n[e][0]]})},this.getCappedCampaignsAsString=function(){return this.getCappedCampaigns().map(function(e){return e.join("=")}).join(",")}},R=function(e){var t=e.ViewCapping;t&&x.registerView(t.C,t.T)},B=function(e,t){var i=e.shift();i?(i.parent.appendChild(i.script),i.script.src?i.script.onload=function(){B(e,t)}:B(e,t)):t&&t()},z=function(e,t,i){e.innerHTML=t;var n=e.querySelectorAll("script"),r=[];Array.prototype.forEach.call(n,function(e){var t=e.parentElement;t.removeChild(e);var i=o.createElement("script");"id|type|src|textContent".split("|").forEach(function(t){e[t]&&(i[t]=e[t])}),r.push({script:i,parent:t})}),B(r,i)},O=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},F=function(e,t){e.classList?e.classList.toggle(t):function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}(e,t)?O(e,t):function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}(e,t)},U=function(e){e.style.display="block"},M=!1,H=function(e,i,a){var d,l='<div id="ivPopupContainer"> <div id="ivPopup">  <div class="fermer"> <div id="resize-btn"> <img class="max-btn" src="//static.r66net.com/Content/Images/maximizev8.png" /> <img class="min-btn" src="//static.r66net.com/Content/Images/minimizev8.png" /> </div> <div id="fermer-btn"> <img src="//static.r66net.com/Content/Images/closev8.png" /> </div> <div id="fermer-msg"> <p>'+r.localize("loading")+'</p> </div> </div> <div id="sewebContainer" class="nonInbound"> <iframe id="ivFrame" frameborder="0"></iframe> </div> </div> </div>',c='<div id="ivPopupContainer"> <div id="ivPopup"> <div class="fermer"> <div id="fermer-btn"> <img src="//static.r66net.com/Content/Images/closev8.png" /> </div> <div id="fermer-msg"> <p>'+r.localize("loading")+'</p> </div> </div> <div id="sewebContainer" class="nonInbound"> <iframe id="ivFrame" frameborder="0"></iframe> </div> </div> </div>',u=function(e){f(e,s.sewebUrl)&&("close"===e.data.command&&r.popup.close(),"toggleMax"===e.data.command&&r.popup.toggleMaximized())};d=i?'<div id="ivPopupContainer"> <div id="ivPopup"> <div id="sewebContainer"> <iframe id="ivFrame" frameborder="0"></iframe> </div> </div> </div>':e?l:c;var p=o.createElement("div");p.innerHTML=d,p.style.display="none",o.querySelector("body").appendChild(p);var m=o.getElementById("ivPopup");e&&!i&&o.getElementById("resize-btn").addEventListener("click",function(e){e.preventDefault(),r.popup.toggleMaximized()});i&&t.addEventListener("message",u,!1);var g={};return g.show=function(){var e=r.currentAd;if(o.querySelector("html").setAttribute("style","overflow: hidden !important"),o.querySelector("body").setAttribute("style","overflow: hidden !important"),r.vsSewebStartTime=(new Date).toISOString(),t.onbeforeunload=t.onpagehide=function(){return""},t.addEventListener("beforeunload",Ie),t.addEventListener("pagehide",Ie),U(p),!i){var a=o.getElementById("fermer-btn");a&&a.addEventListener("click",function(){r.popup.close()}),U(o.getElementById("fermer-msg")),n.window.setTimeout(function(){var e=o.getElementById("fermer-msg");e&&(e.style.display="none")},5e3)}var d=s.sewebUrl+"/V8/Overlay/?bvExposedId="+e.VideoExposedId+"&t="+e.Token+"&et="+e.EwebToken+"&lid="+r.dom.id+"&lang="+r.localize.currentLanguage;e.CustomInfo&&(d+="&addinf="+e.CustomInfo),e.InvoiceOnBoxOpen&&(d+="&ib=1"),void 0!==r.slideIndex&&(d+="&si="+r.slideIndex),r.extraSewebParams&&(d+="&"+v(r.extraSewebParams));var l=function(){if(r.currentAd.CampaignGeoTag&&r.currentAd.CampaignGeoTag.TagReplacements){var e={},t=r.currentAd.CampaignGeoTag.TagsNotSentToSeweb||[],i=r.currentAd.CampaignGeoTag.TagReplacements;for(var n in i)i.hasOwnProperty(n)&&-1===t.indexOf(n)&&(e[n]=i[n]);return JSON.stringify(e)}}();l&&(d+="&GeoTagContent="+encodeURIComponent(l)),o.getElementById("ivFrame").setAttribute("src",d)},g.close=function(){i&&t.removeEventListener("message",u);var e=o.getElementById("ivPopupContainer").parentElement;o.getElementById("ivFrame").src="about:blank",setTimeout(function(){e.parentElement.removeChild(e)},0),setTimeout(function(){Ie(!0)},0),o.querySelector("html").setAttribute("style",""),o.querySelector("body").setAttribute("style",""),r.dispatchEvent("afterEngagement",r.videoAdContentResult)},g.toggleMaximized=e?function(){F(m,"maximize")}:function(){},e&&a&&g.toggleMaximized(),g},j=r.sendStatwebStats=function(e,t,i){var n=s.statwebUrl+"/statPixel?location="+encodeURIComponent(d());o.referrer&&(n+="&referrer="+encodeURIComponent(o.referrer.substring(0,300).split(/[?#]/)[0])),r.dom.id&&(n+="&lId="+r.dom.id),n+="&optIn="+r.optIn,n+="&actionType="+e,t=t||r.visitId+"|"+r.optIn,n+="&additionalInfo="+encodeURIComponent(t),r.id&&(n+="&cookie="+encodeURIComponent(r.id)),i&&(n+="&rfc="+i),n+="&ts="+(new Date).getTime()+u(),r.pixel(n)},N=null,q=!1;r.clickSentPromise=new Promise(function(e){V=e});var _,W,G,X=r.sendClickStats=function(e,t){if(!r.adClickSent){r.adClickSent=1;var i=r.currentAd,n=i.CampaignGeoTag?i.CampaignGeoTag.ApiKeyInfo:null;t&&(n+="|"+t);var o=v({bvToken:i.Token,ivbsCampIdsLocal:r.getCookie("IvbsCampIdsLocal"),exposedId:"VideoExposedId="+i.VideoExposedId,location:d(),additionalInfo:n,optIn:r.optIn}),a=s.kwebstatUrl+"/Stat/RegisterAdClickStat?"+o;r.jsonp(a,function(t){t.campIds&&r.setCookie("IvbsCampIdsLocal",t.campIds,365),V(),e&&e()})}},Y=[],Q=r.sendUserVideoEventId=function(e,t,i){var n;if(r.videoAdContentResult){var o=i||r.currentAd;(n=o&&o.Token?{bvToken:o.Token,additionalInfo:t}:{pageId:r.videoAdContentResult.PageId,publisherUrlId:r.videoAdContentResult.PublisherUrlId,userCookieId:r.id,zone:r.videoAdContentResult.Zone,vId:r.visitId,additionalInfo:t}).eventType=e,1050!==e&&1052!==e||(n.location=d()),r.pixel(s.kwebstatUrl+"/Stat/PixelUve",n)}else Y.push([e,t])},K=(_=!0,W=function(e){return null!=e&&("none"==function(e){return e.currentStyle?e.currentStyle.display:getComputedStyle(e,null).display}(e)||W(e.parentElement))},function(e){if(r.testMode&&r.doNotWaitForScroll)return!0;var t=e.getBoundingClientRect().top;return n.window.innerHeight>t&&t>=0&&(_&&(_=W(e)),!_)});r.createOutgoingLink=function(e){var t=r.currentAd,i=(t.Token,e.replace(/\[[^\]]*(timestamp|cache)[^\]]*\]/gi,(new Date).getTime()));return r.utm&&(i+=r.utm),s.ewebUrl+"/redir/?t="+t.EwebToken+"&to="+encodeURIComponent(i)};var J=function(e){r.outgoingClicked=1,r.handleAdClick&&r.handleAdClick(),r.sendClickStats&&r.sendClickStats(),1===r.vpaidClickedThrough&&e.preventDefault()},Z=function(e,t){if(e){var i=t||e.getAttribute("outgoing-href");if(i){var n=r.createOutgoingLink(i);e.setAttribute("href",i),e.setAttribute("onmousedown",'this.href="'+n+'"'),e.setAttribute("ontouchstart",'this.href="'+n+'"'),e.removeEventListener("click",J),e.addEventListener("click",J)}}};r.initializeAllOutgoingLinks=function(){var e=r.adDiv.querySelectorAll("a[outgoing-href]");(e=Array.prototype.slice.call(e)).forEach(function(e){Z(e)})};t.addEventListener("message",function(e){f(e,s.sewebUrl)&&r.dispatchEvent("messageFromPopup",e)},!1);var $=function(e){var i,n={},o=[],s=function(e){Object.keys(n).filter(function(t){return t<=e}).forEach(function(e){n[e].disable(),delete n[e]})},a=function(){if(o.length){var t=o[o.length-1];e.onCheckpointReached.call(null,t),o=[]}},d=function(){var d,l=r.getClientVerticalVisibilityPercent(e.target);if(Object.keys(n).forEach(function(e){var t=n[e];t.update(l),t.done&&(d=e)}),d>-1){var c=parseInt(d,10);i&&t.clearTimeout(i),s(d),e.debounceRate>0&&Object.keys(n).length>0?(o.push(c),i=t.setTimeout(a,e.debounceRate)):e.onCheckpointReached.call(null,c)}};return e.checkpoints.sort().forEach(function(i){n[i]=new function(e,i,n){var o,r=0,s=0,a=(new Date).getTime(),d=function(){o&&t.clearTimeout(o)};return{update:function(l){if(d(),!this.done){var c=(new Date).getTime();if(s>=e){if((r+=c-a)>=i.duration)return void(this.done=1)}else i.continuous&&(r=0);if(l>=e){var u=i.duration-r;o=t.setTimeout(n,u)}a=c,s=l}},disable:function(){d()}}}(i,e,d)}),r.addEventListener("scrollresize",d),d(),{stop:function(){r.removeEventListener("scrollresize",d),s(101)}}},ee=function(e){var t=function(){if(h.info("view"),r.viewed=!0,r.dispatchEvent("view"),function(e){if(R(r.currentAd),!r.adViewSent){r.adViewSent=1,e.querySelector("div.ivbsGeneral");var t=v({bvToken:r.currentAd.Token,exposedId:"VideoExposedId="+r.currentAd.VideoExposedId,location:d(),additionalInfo:r.currentAd.CampaignGeoTag?r.currentAd.CampaignGeoTag.ApiKeyInfo:null,optIn:r.optIn,udata:r.currentAd.UData}),i=s.kwebstatUrl+"/Stat/RegisterAdViewStat?"+t;r.jsonp(i)}}(e),r.currentAd.DmpScript&&r.optIn>0){var t=new Function(r.currentAd.DmpScript);try{t.call()}catch(e){h.error("Dmp script error",e)}}},i=N.MinPercentageForAdview||0,n=r.currentAd.MinPercentageForAdview||0,o=i>n?i:n;if(o){var a=function(){r.getClientVerticalVisibilityPercent(e)>=o&&(t(),r.removeEventListener("scrollresize",a))};r.addEventListener("scrollresize",a),a()}else t()},te=function(){r.hasScrolled=!0;var e=r.adDiv=r.adDiv||Ce();if(!e)return G(),j(-40,"NoVideoAdDivFound"),void Le();if(Pe(e))if(0!==r.statusCode){var t;G(),r.adDisplayed=!0;var i,n=r.currentAd;e.getAttribute("id");n.HtmlString?(i=n.HtmlString,t=i=Te(i=r.currentAd.HasInspiredBy?function(e){var t='<link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,500|Open+Sans|Oswald:100,300,400,500" rel="stylesheet" type="text/css"><div style="font-size:10px;color:black; margin: 0 auto; line-height: normal; position: relative;"><div class="ivTrigger">'+r.videoAdContentResult.LocalizedAdvertiserTitle+'</div><span class="ivDropDown"><span onclick="invibes.hideAndSuspend();">'+r.localize("suspend")+'</span><span class="ivCookies">'+r.localize("aboutCookies")+'<div class="ivCookieInfo"><div><img src="//bvt.r66net.com/vi/options-arrow.png" /><p>'+r.localize("cookieDescription")+'</p><p class="ivClearCookiesConfirmation" style="display: none;">'+r.localize("cookiesDeleted")+'</p><a href="javascript:void(0);" class="ivClearCookiesLink">'+r.localize("clearCookies")+'</a><a target="_blank" href="http://www.invibes.com/terms.html">'+r.localize("cookiePolicy")+'</a></div></div></span><a target="_blank" href="http://www.invibes.com/">'+r.localize("about")+"</a></span></div>",i=e.indexOf(">",e.indexOf("<div"))+1;return e=[e.slice(0,i),t,e.slice(i)].join("")}(i):function(e){var t={videoAdSuspend:"suspend",videoAdAbout:"about",aboutCookies:"aboutCookies",cookieDescription:"cookieDescription",clearCookies:"clearCookies",cookiePolicy:"cookiePolicy",cookiesDeleted:"cookiesDeleted"};return Object.keys(t).forEach(function(i){if(t.hasOwnProperty(i)){var n=new RegExp("\\["+i+"\\]","g"),o=r.localize(t[i]);e=e.replace(n,o)}}),e}(i)),z(e,t)):j(-40,"NoHtmlString|VideoExposedId="+n.VideoExposedId);var a,d=e.querySelector("div[id^='divMosaic+']");d&&($({target:r.adDiv,duration:1e3,debounceRate:700,checkpoints:[35,50,75],onCheckpointReached:function(e){var t;r.maxv1s=e,r.dispatchEvent("visiCheckpoint",e),t={cookieId:r.id,pageId:r.vsPageId,bvToken:n.Token,userDeviceType:N.UserDeviceType,visibilityPercentCheckpoint:e},r.jsonp(s.kwebstatUrl+"/Stat/RegisterAdVisibility?"+v(t))}}),function(e){var t=!1,i=e.querySelector(".ivTrigger"),n=e.querySelector(".ivDropDown"),o=e.querySelector(".ivCookies"),s=e.querySelector(".ivCookieInfo"),a=e.querySelector(".ivClearCookiesLink"),d=e.querySelector(".ivClearCookiesConfirmation");i&&n&&(i.addEventListener("click",function(){F(i,"active"),s&&O(s,"active"),t=!t,n.style.display=t?"block":"none"}),o&&(o.addEventListener("click",function(){F(s,"active")}),a.addEventListener("click",function(e){e.cancelBubble=!0,a.parentNode.removeChild(a),r.dom.id&&r.sendStatwebStats(11003,r.dom.id),r.noCookies=1,r.optIn=0,r.setCookie("ivNoCookie",1,365),r.deleteLocalCookies(),D.clear(function(){d.style.display=""})})))}(d),r.currentAd.HasInspiredBy&&function(e){var t=o.createElement("div");t.innerHTML='<div id="ivbsFooter" class="ivbsIdentity" style="margin: 0 auto!important;text-align: right!important;color: #555!important;font-size: 10px!important;letter-spacing: -0.2px!important;line-height: 16px!important;padding: 5px 0!important;font-family: \'Roboto\',sans-serif!important;font-weight: 400!important;" >Inspired by<a title="Invibes advertising" target="_blank" href="http://www.invibes.com"><img style="height: 16px!important;margin-right: 0!important;margin-top: 0!important;float:right!important;margin-left: 3px!important;" src="//bvt.r66net.com/Images/logo-invibes-grey.svg"></a></div>',e.appendChild(t)}(d)),r.trySetStatus({code:1}),r.initializeAllOutgoingLinks(),a=r.adDiv.querySelectorAll('[data-role="clickTarget"]'),(a=Array.prototype.slice.call(a)).forEach(function(e){e.addEventListener("click",r.handleAdClick)}),function(){var e=r.currentAd.TrackingScript;if(e){e=Te(e);var t=o.createElement("script");t.type="text/javascript",t.text=e,r.adDiv.appendChild(t)}}(),!r.vsSentVideoAdStats&&e.innerHTML.length&&(r.vsSentVideoAdStats=!0,ee(e)),function(e){if(e.VisiDuration&&e.VisiPercent){var t={target:{percentage:e.VisiPercent,duration:e.VisiDuration}};e.VisiElementId&&(t.target.element=o.getElementById(e.VisiElementId)),h.info(["Starting Visi: ",t]),new r.Visi(t).start()}}(n),r.dispatchEvent("adRendered",r.videoAdContentResult)}else r.scrollTimeoutStatSent||(r.scrollTimeoutStatSent=!0,j(-45,Date.now()-r.videoAdResponseReceived))};G=function(){r.removeEventListener("scrollresize",te)};var ie=function(){var e=(r.currentAd.OverlayType||"").split("_"),t=e.indexOf("fixed")<0,i=e.indexOf("inbound")>=0,n=e.indexOf("maximized")>=0;return H(t,i,n)},ne=function(e,t){var i=this;i.bidModel=e,i.ad=t,ne.adDisplayed=!1,i.handleAdDisplay=function(e){switch(i.bidModel.BidVersion){case 0:r.continueAdDisplay=function(t){if(!ne.adDisplayed){if(ne.adDisplayed=!0,null!=t)for(var n=t.ownerDocument.defaultView.frameElement;null!==n;)n.parentNode.insertBefore(t,n.nextSibling),n=n.ownerDocument.defaultView.frameElement;r.dispatchEvent("afterBidWin"),r.sendUserVideoEventId(4002,i.ad.BidPrice,i.ad),e(t)}},n.dispatchEvent(new k("ivbsReadyToDisplay"));break;case 1:if(ne.adDisplayed)return;ne.adDisplayed=!0,r.dispatchEvent("afterBidWin"),r.sendUserVideoEventId(4002,i.ad.BidPrice,i.ad),e();break;default:h.logError("Bid Version "+i.bidModel.BidVersion+" is not known. Cannot display.")}}},oe=function(e,i,n){var o=t.location.href.match(/testcotargeting/i),s=function(a){a=a||0;var d=e.Ads[a];if(!d)return r.trySetStatus({code:0}),void n();var l=d.VideoExposedId,c=function(){null!=e.BidModel?new ne(e.BidModel,d).handleAdDisplay(function(t){d.displayed=!0,h.log("Displaying: "+l),i(e,d,t)}):(d.displayed=!0,h.log("Displaying: "+l),i(e,d))},u=function(){return!!e.Ads[a+1]},v=function(){s(a+1)};if(d.CotargetingScript){if(r.testMode&&!o)return h.info("COT skipped (considered true): "+l+" (add &testCotargeting parameter in url to test cotargeting)"),void c();var f=function(e){try{return new Function(e)()}catch(e){}}(d.CotargetingScript);if(!f)return h.error("INVALID COT: "+l),r.sendUserVideoEventId(1112),void v();if(r.scrolledToAd&&u())return h.warn("Scrolled! No time for COT: "+l),r.sendUserVideoEventId(1113),void v();h.log("COT request: "+l),t.setTimeout(function(){d.displayed||d.refused||(h.warn("COT timeout "+l),d.refused="timeout",r.sendUserVideoEventId(1111),v())},25e3),r.addEventListener("scrollToAd",function e(){d.displayed||d.refused||u&&(d.refused="scroll",r.sendUserVideoEventId(1110),v(),h.warn("COT cancelled because of early scroll: "+l),r.removeEventListener("scrollToAd",e()))}),d.cotargetingStarted=(new Date).getTime(),f(function(e,t){var i=(new Date).getTime();d.elapsed=i-d.cotargetingStarted;var n={elapsed:d.elapsed,response:t,refuseReason:d.refused};if((d.elapsed<0||d.elapsed>6e5)&&(n.started=d.cotargetingStarted,n.ended=i),n=JSON.stringify(n),d.refused){var o=e?1102:1103;r.sendUserVideoEventId(o,n)}else h.info("COT response for "+l+": "+!!e),e?(r.sendUserVideoEventId(1100,n),c()):(r.sendUserVideoEventId(1101,n),d.refused="cot.no",v())})}else c()};this.displayAnAd=function(){e.Ads=e.Ads||[],s(0)}},re=function(){var e,t,i=function(){return e=function(){if(null==r.bidContainerId)return null;var e=null,t=!1;return t||(e=o.getElementById(r.bidContainerId)||o.getElementsByClassName(r.bidContainerId)[0],t=!0),e}()||e||Ce()},n=r.isTablet?1052:1050;t=function(){var e=i();e&&K(e)&&(r.removeEventListener("scrollresize",t),h.info("scrolled!"),r.scrolledToAd=!0,r.dispatchEvent("scrollToAd"),r.scrollToAdStatSent||(r.scrollToAdStatSent=!0,Q(n)))},r.addEventListener("scrollresize",t),t()},se=function(){var e=function(e){if(null!=e){if(e.AutoOI)return r.noCookies=0,r.setCookie("ivNoCookie",0,-1),r.optIn=10,void r.setCookie("ivOptIn",10,365);if(e.Cmp&&0===r.optIn){var t,i=function(e,i,s){var a,d=n.getElementsByClassName(e);d&&d[0]&&(i?d[0].addEventListener("click",(a=s,function(){!0===a?(r.noCookies=0,r.setCookie("ivNoCookie",0,-1),r.setCookie("ivOptIn",1,365),r.optIn=1):!1===a&&(r.setCookie("ivOptIn",-1,365),r.optIn=-1),t&&(t.style.display="none",o.body.classList.remove("ivbsCmpBlur")),n&&(n.style.display="none")})):d[0].style.display="none")};e.Overlay&&((t=o.createElement("div")).classList.add("ivbsCmpOverlay"),o.body.appendChild(t),o.body.classList.add("ivbsCmpBlur"));var n=o.createElement("div");n.id="ivbsCmpContainer",o.body.appendChild(n);try{z(n,e.ConsentPop)}catch(e){h.error(e)}i("ivbsCmpAccept",!0,!0),i("ivbsCmpReject",e.RejectButton,!1),i("ivbsCmpClose",e.CloseButton,void 0)}}};return{makeCmpRequest:function(){0===r.optIn&&r.jsonpWithParams(s.cmpUrl,{location:d()},function(t){e(t)})},handleCmpResponse:e}},ae=!1,de=!1,le=r.hide=function(){o.getElementById("divMosaic+"+r.videoAdContentResult.HtmlId).style.display="none"};r.hideAndSuspend=function(){le(),r.jsonp(r.uwebDomain+"/SuspendVideoAdForADay"),r.setCookie(w,"1",1),j(49)},r.getGAParams=function(){var e=this.currentAd.GA;return void 0!==this.slideIndex&&(e+="_"+this.slideIndex),e};r.handleAdClick=function(){h.info("click"),r.clicked=!0,r.dispatchEvent("click"),X(),r.dispatchEvent("beforeEngagement",r.videoAdContentResult),r.customEngagement||r.outgoingClicked||r.popup.show(),le()};var ce,ue,ve,fe,pe,me,ge=r.isTablet?901:900,he=r.isTablet?904:903,ye=!1;if(r.handleAdSwipe=function(){Q(ye?he:ge),r.dispatchEvent(ye?"firstSwipe":"swipe"),ye=!0},null==r.bidResponse){var be=Promise.race([function(){var e=(new Date).getTime(),t=new Image;return t.src="//static.r66net.com/Content/Images/loading-black.gif",new Promise(function(i){t.addEventListener("load",function(){var t=(new Date).getTime();r.latency=t-e,h.log("Latency: "+r.latency),i()})})}(),(ce=500,new Promise(function(e){t.setTimeout(function(){r.latency||(h.warn("Latency timed out after "+ce+" ms."),e())},ce)}))]),Ee=new Promise(function(e){D.detectUserId(e)});Promise.all([be,Ee]).then(function(){Re()})}(t.invibes=t.invibes||{}).InlinePlayer=function(){function e(e,t,i,n){function o(t){Boolean(e[i])===Boolean(n)&&t.stopImmediatePropagation(),delete e[i]}return e.addEventListener(t,o,!1),o}function t(e,t,i,n){function o(e){i[t]=e}n&&o(e[t]),Object.defineProperty(e,t,{get:function(){return i[t]},set:o})}var i="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,n=/iPhone|iPod|iPad/i.test(navigator.userAgent),o=i(),r=i(),s=i("nativeplay"),a=i("nativepause"),d=[];function l(e,t,i){(d.tue||0)+200<Date.now()&&(e[r]=!0,d.tue=Date.now()),i||(e.currentTime=t),d[++d.i%3]=100*t|0}function c(e){return e.driver.currentTime>=e.video.duration}function u(){var e=this[o];this.webkitDisplayingFullscreen?this[s]():("data:"!==e.driver.src&&e.driver.src!==this.src&&(l(this,0,!0),e.driver.src=this.src),this.paused&&(e.paused=!1,this.buffered.length||this.load(),e.driver.play(),e.updater.start(),this.dispatchEvent(new Event("play")),this.dispatchEvent(new Event("playing"))))}function v(e){var t=this[o];t.driver.pause(),t.updater.stop(),this.webkitDisplayingFullscreen&&this[a](),t.paused&&!e||(t.paused=!0,this.dispatchEvent(new Event("pause")),this.ended&&(this[r]=!0,this.dispatchEvent(new Event("ended"))))}function f(e,t){var i=e[o]={};i.paused=!0,i.hasAudio=!0,i.video=e,i.updater=new function(e){var t=void 0,i=void 0;function n(o){t=requestAnimationFrame(n),e(o-(i||o)),i=o}this.start=function(){t||n(0)},this.stop=function(){cancelAnimationFrame(t),t=null,i=0}}(function(e){this.video.readyState>=this.video.HAVE_FUTURE_DATA?(this.hasAudio||(this.driver.currentTime=this.video.currentTime+e*this.video.playbackRate/1e3,this.video.loop&&c(this)&&(this.driver.currentTime=0)),l(this.video,this.driver.currentTime)):this.video.networkState===this.video.NETWORK_IDLE&&this.video.load(),this.video.ended&&this.video.pause(!0)}.bind(i)),i.driver=function(e){var t=new Audio;return t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}(e),e.addEventListener("emptied",function(){var t=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(l(e,0,!0),i.driver.src=e.src,t?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?i.driver.buffered.length||i.driver.load():(e.pause(),e[s]())}),e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){d.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)})}function p(i,d,l){d=void 0===d||d,(l=void 0===l||l)&&!n||i[o]||(f(i),function(i){var n=i[o];i[s]=i.play,i[a]=i.pause,i.play=u,i.pause=v,t(i,"paused",n.driver),t(i,"muted",n.driver,!0),t(i,"playbackRate",n.driver,!0),t(i,"ended",n.driver),t(i,"loop",n.driver,!0),e(i,"seeking"),e(i,"seeked"),e(i,"timeupdate",r,!1),e(i,"ended",r,!1)}(i),i.classList.add("IIV"),!d&&i.autoplay&&i.play())}return d.i=0,p.isWhitelisted=n,function(e,t){t&&e.setAttribute("src",t);var i=null===e.getAttribute("muted");return n&&p(e,i),{videoElement:e,play:function(){return this.videoElement.play()},pause:function(){return this.videoElement.pause()},isPaused:function(){return this.videoElement.paused},isMuted:function(){return this.videoElement.muted},mute:function(){this.videoElement.muted=!0,this.videoElement.volume=0},unmute:function(){this.videoElement.muted=!1,this.videoElement.volume=1},toggleSound:function(){this.isMuted()?this.unmute():this.mute()}}}}(),(r.VideoQuartileReporter=function(e){(e=e||{}).tolerance=e.tolerance||3;var t=this,i=0;this.videoElement=e.videoElement,this.checkpoints=e.checkpoints||[0,25,50,75,99],e.report=e.report||function(t){r.sendUserVideoEventId(1300+t,e.videoElement.src)},this.handleTimerEvents=function(){var n=t.videoElement.currentTime,o=e.duration||parseInt(t.videoElement.getAttribute("data-qduration"))||t.videoElement.duration;if(!isNaN(o)){for(var r=Math.floor(100*n/o),s=-1,a=0;a<t.checkpoints.length;a++){var d=t.checkpoints[a];if(!(d<i)){if(d>=r+e.tolerance)break;s=a}}if(s>=0){var l=t.checkpoints[s];t.checkpoints.splice(s,1),e.report(l)}i=r}},this.videoElement.addEventListener("timeupdate",this.handleTimerEvents)}).prototype.destroy=function(){this.videoElement.removeEventListener("timeupdate",this.handleTimerEvents)},function(){var e=r.VastParser=function(e,t){this.url=e,this.config=t=t||{},t.mediaType=t.mediaType||"video/mp4",this.quartiles={},this.configErrors=[],this.vpaidConfig=vpaidConfig={},Object.keys(t).forEach(function(e){t.hasOwnProperty(e)&&(vpaidConfig[e]=t[e])}),this.vpaidConfig.mediaType="application/javascript"};e.prototype.initialize=function(e){var t=this,i=new XMLHttpRequest;i.addEventListener("load",function(i){t.__parseXmlConfig(i),e&&e()}),i.open("GET",this.url),i.send()};var t=function(e,t){var i={};["bitrate","width","height","type","apiFramework"].forEach(function(t){i[t]=e.getAttribute(t)}),i.src=e.textContent;var n=i.type===t.mediaType&&(!t.minBitrate||i.bitrate>=t.minBitrate)&&(!t.maxBitrate||i.bitrate<=t.maxBitrate);if("application/javascript"!==i.type||i.apiFramework&&"VPAID"===i.apiFramework.toUpperCase()||(n=!1),n)return i};e.prototype.__parseXmlConfig=function(e){var i=this,n=e.target.responseXML,o=n.querySelector("Impression");o&&(this.impressionUrl=o.textContent);var s=n.querySelector("ClickThrough");s&&(this.clickThroughUrl=s.textContent);var a=n.querySelectorAll("Creative Linear");if(0!==a.lenght){a.lenght>1&&r.logger.warn("VAST url="+this.url+": More than one creative found. Will only play the first!");var d=a[0],l=d.querySelectorAll("MediaFile");if(this.mediaFile=Array.prototype.reduce.call(l,function(e,n){return e||t(n,i.config)},null),this.vpaidFile=Array.prototype.reduce.call(l,function(e,n){return e||t(n,i.vpaidConfig)},null),this.mediaFile||this.vpaidFile||this.errors.push("No suitable Media Files or VPAID files found!"),this.vpaidFile){var c=d.querySelectorAll("AdParameters");c[0]&&(this.adParams=c[0].textContent)}var u={start:0,firstQuartile:25,midpoint:50,thirdQuartile:75,complete:99},v=d.querySelectorAll("Tracking");if(Array.prototype.forEach.call(v,function(e){var t=e.getAttribute("event"),n=u[t];void 0!==n&&(i.quartiles[n]=i.quartiles[n]||[],i.quartiles[n].push(e.textContent))}),this.configErrors.length){var f="Error(s) parsing VAST url: "+this.url+"\n";f+=this.configErrors.join("\n"),r.logger.error(f)}}else this.configErrors.push("No Linear Creatives found!")}}(),r.FullscreenApi=function(){var i=null;return function(){var n,r,s,a,d=null,l=function(){null!==i&&(i.recentlyChanged=!0,clearTimeout(d),d=setTimeout(function(){i.recentlyChanged=!1},100))};return null===i&&(n=void 0!==o.documentElement.requestFullscreen?"requestFullscreen":void 0!==o.documentElement.mozRequestFullScreen?"mozRequestFullScreen":void 0!==o.documentElement.webkitRequestFullscreen?"webkitRequestFullscreen":void 0!==o.documentElement.webkitRequestFullScreen?"webkitRequestFullScreen":void 0!==o.documentElement.msRequestFullscreen?"msRequestFullscreen":void 0,r=void 0!==o.exitFullscreen?"exitFullscreen":void 0!==o.mozCancelFullScreen?"mozCancelFullScreen":void 0!==o.webkitExitFullscreen?"webkitExitFullscreen":void 0!==o.webkitExitFullScreen?"webkitExitFullScreen":void 0!==o.msExitFullscreen?"msExitFullscreen":void 0,s=void 0!==o.onfullscreenchange?"fullscreenchange":void 0!==o.onmozfullscreenchange?"mozfullscreenchange":void 0!==o.onwebkitfullscreenchange?"webkitfullscreenchange":void 0!==o.onmsfullscreenchange?"MSFullscreenChange":void 0,void 0!==n&&void 0!==r&&void 0!==s?(ke(a={requestFullscreen:function(t){l(),t[n](),s||a.dispatchEvent("fullscreenchange",e)},exitFullscreen:function(){l(),o[r](),s||a.dispatchEvent("fullscreenchange",e)},isFullscreen:function(){return null!=o.fullscreenElement||null!=o.webkitFullscreenElement||null!=o.webkitFullScreenElement||null!=o.mozFullScreenElement||null!=o.msFullscreenElement},onfullscreenchange:void 0}),o.addEventListener(s,function(e){a.dispatchEvent("fullscreenchange",e),a.onfullscreenchange&&a.onfullscreenchange(e)}),i=a):i=function(){var i,n=null,r=function(e){e.preventDefault()},s=function(e){e?o.addEventListener("touchmove",r,{passive:!1}):o.removeEventListener("touchmove",r,{passive:!1})},a={requestFullscreen:function(r){l(),n=r,i=function(){var e=o.createElement("div");e.style.display="none",e.classList.add("ivbsFullscreenPlaceholder");var i=function(){var o=n.getBoundingClientRect();o.height<1?t.setTimeout(i,50):(e.style.width=o.width+"px",e.style.height=o.height+"px",e.style.left=o.left,e.style.right=o.right,e.style.position=n.style.position?n.style.position:"relative",e.style.zIndex=n.style.zIndex)};return i(),n.parentElement.insertBefore(e,n),{hide:function(){e.style.display="none"},show:function(){e.style.display="block"},el:e}}(),function(){n.parentElement.removeChild(n);var e=o.createElement("div");e.style.zIndex="2147483647",e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0",e.appendChild(n),o.body.appendChild(e),o.body.classList.add("ivbsNoScroll"),s(!0)}(),n.style.height="100%",n.style.width="auto",n.style.left="0",n.style.right="0",a.dispatchEvent("fullscreenchange",null),a.onfullscreenchange&&a.onfullscreenchange(e)},exitFullscreen:function(){var t;l(),(t=n.parentElement).removeChild(n),i.el.parentElement.insertBefore(n,i.el),o.body.removeChild(t),o.body.classList.remove("ivbsNoScroll"),s(!1),n.style.height=i.el.height,n.style.width=i.el.width,n.style.left=i.el.left,n.style.right=i.el.right,n.style.position=i.el.position,n.style.zIndex=i.el.zIndex,n=null,i=null,a.dispatchEvent("fullscreenchange",null),a.onfullscreenchange&&a.onfullscreenchange(e)},isFullscreen:function(){return null!==n},onfullscreenchange:void 0};return ke(a),a}()),i}}(),r.Fullscreen=function(e,t){var i=t.toggle instanceof Element?t.toggle:o.getElementById(t.toggle),n=t.target instanceof Element?t.target:o.getElementById(t.target),s=t.fullscreenClass||"ivbsFullscreen",a=t.normalscreenClass||"ivbsNormalscreen",d=r.FullscreenApi(),l=!1,c=function(){i.classList.add(a),i.classList.remove(s),n.classList.add(a),n.classList.remove(s)},u=function(){d.isFullscreen()?(i.classList.add(s),i.classList.remove(a),n.classList.add(s),n.classList.remove(a)):c(),"function"==typeof e.getPlayer.resize&&e.getPlayer.resize(isFullscreen)},v=function(t){t.stopPropagation(),t.preventDefault(),e.getPlayer&&(d.isFullscreen()?d.exitFullscreen():d.requestFullscreen(n),l?r.sendUserVideoEventId(971):(r.sendUserVideoEventId(970),l=!0))};return{init:function(){null!=d?(c(),i.addEventListener("click",v),d.addEventListener("fullscreenchange",u)):h.warn("Fullscreen not supported. Check bv templace config.")}}},r.Draggable=function(e,t){var i,n,s=t.target instanceof Element?t.target:o.getElementById(t.target),a=t.outOfViewTransition||"ivbsOutOfViewTransition",d=0,l=0,c=!1,u=function(){var e=s.getBoundingClientRect(),t=s.parentElement.getBoundingClientRect();return{left:e.left-t.left,right:e.right-t.right}},v=function(){var e=u();e.left>0?(s.classList.add(a),s.style.left=parseInt(s.style.left)-e.left+"px"):e.right<0&&(s.classList.add(a),s.style.left=parseInt(s.style.left)-e.right+"px")},f=function(e){e.preventDefault(),p(e)},p=function(e){i=0,null!=e.clientX?l=e.clientX:e.touches&&e.touches.length>0&&(l=e.touches[0].clientX),s.classList.remove(a),o.addEventListener("mouseup",h),o.addEventListener("touchend",h),o.addEventListener("mousemove",m),o.addEventListener("touchmove",m)},m=function(e){var t;null!=e.clientX?t=e.clientX:e.changedTouches&&e.changedTouches.length>0&&(t=e.changedTouches[0].clientX),i+=Math.abs(l-t),d=l-t,l=t;var n=u();n.left>screen.width/5&&d<0||n.right<0&&Math.abs(n.right)>screen.width/5&&d>0||(s.style.left=s.offsetLeft-d+"px")},g=function(e){i>5&&(e.stopPropagation(),e.preventDefault())},h=function(){v(),c?r.sendUserVideoEventId(973):(r.sendUserVideoEventId(972),c=!0),o.removeEventListener("mouseup",h),o.removeEventListener("touchend",h),o.removeEventListener("mousemove",m),o.removeEventListener("touchmove",m)};return{init:function(){r.FullscreenApi().addEventListener("fullscreenchange",v);var e=o.getElementById(s.id+"header");(n=e||s).addEventListener("mousedown",f),n.addEventListener("touchstart",p),n.addEventListener("click",g)}}},r.Play=r.FullPlay=function(e){var i=this,n=e.video,s=n,a=r.currentAd.VideoCompletionTime;e.topMargin=e.topMargin||0,e.bottomMargin=e.bottomMargin||0,e.visiPercent=r.currentAd.MinVideoVisiPercentToPlay||0;var d=n.parentElement,l=!0,c=!1;n.volume=0;var u=[],v=function(e,t,i){e.addEventListener(t,i),u.push(function(){e.removeEventListener(t,i)})},f=function(){i.createVastQuartileReporter&&i.createVastQuartileReporter()};i.startRecordingQuartiles=function(){i.quartileReporter=new r.VideoQuartileReporter({videoElement:s,report:function(t){var i=e.id||s.getAttribute("data-ivVidId")||s.getAttribute("src");h.log(["QUARTILE",i,t]),r.sendUserVideoEventId(1300+t,"bv_"+i)}}),f(),i.quartilesStarted=!0};var p,m=function(e){e&&(new Image(1,1).src=e)};if(e.toggleMuteBtn){ke(this);var g,y=e.toggleMuteBtn;this.unmute=function(){r.videoZoomed=!0,r.sendUserVideoEventId(g?3501:3500),g=!0,p.unmute(),y.classList.remove("ivbsToggleMute"),y.classList.add("ivbsToggleUnmute"),d.classList.add("ivFlashyMaxi"),"function"==typeof p.resize&&p.resize(),this.dispatchEvent("unmute")},this.mute=function(){delete r.videoZoomed,p.mute(),y.classList.add("ivbsToggleMute"),y.classList.remove("ivbsToggleUnmute"),d.classList.remove("ivFlashyMaxi"),"function"==typeof p.resize&&p.resize(),this.dispatchEvent("mute")},y.classList.add("ivbsToggleMute"),v(y,"click",function(e){e.stopPropagation(),e.preventDefault(),p&&(r.videoZoomed?i.mute():i.unmute())}),r.visibilityAPI&&v(o,r.visibilityAPI.eventName,function(){r.visibilityAPI.isVisible()||i.mute()})}var b={get getPlayer(){return p}};e.fullscreen&&new r.Fullscreen(b,e.fullscreen).init(),e.draggable&&new r.Draggable(b,e.draggable).init();var E=e.vastUrl||e.vpaidUrl,k=!1,C=function(e){v(e,"timeupdate",function(){l&&(l=!1,h.debug("IPlay heated"),i.scrollResizeHandler()),e.currentTime>a&&!k&&(k=!0,r.sendUserVideoEventId(1e3))})};if(E){var w=this.vast=new r.VastParser(E);i.pending=!0,w.initialize(function(){if(i.pending=!1,e.vpaidUrl){n.volume=0,n.muted=!0,n.setAttribute("playsinline",""),l=!1;var t={video:n,fileSettings:w.vpaidFile,params:w.adParams,eventHandler:r.sendUserVideoEventId,vpaidHasRedirect:void 0!==e.vpaidHasRedirect&&e.vpaidHasRedirect,noLoop:e.noLoop,indexVideoOnFinish:e.indexVideoOnFinish};p=r.VPAIDPlayer(t),s=p.timedVideo,C(s)}else n.setAttribute("src",w.mediaFile.src),p=new r.InlinePlayer(n),e.noLoop||v(n,"ended",function(){n.currentTime=0,n.play()}),C(n);if(w.clickThroughUrl){if(e.vastRedirectLinkId){var a=o.getElementById(e.vastRedirectLinkId);a&&"A"===a.nodeName&&Z(a,w.clickThroughUrl)}if(e.vastRedirectLinkClass){var d=o.getElementsByClassName(e.vastRedirectLinkClass);if(null!=d&&d.length>0)for(var c=0;c<d.length;c++)d[c]&&"A"===d[c].nodeName&&Z(d[c],w.clickThroughUrl)}}var u=w.quartiles,g=Object.getOwnPropertyNames(u);i.createVastQuartileReporter=function(){i.vastQuartileReporter=new r.VideoQuartileReporter({videoElement:s,report:function(e){var t=u[e];if(t)for(var i=0;i<t.length;i++)m(t[i])},checkpoints:g})},i.quartilesStarted&&(i.sendVastImpressionIfNecessary(),f()),I(),i.scrollResizeHandler()})}else p=new r.InlinePlayer(n),e.noLoop||v(n,"ended",function(){n.currentTime=0,n.play()}),C(n);this.sendVastImpressionIfNecessary=function(){this.vast&&this.vast.impressionUrl&&!this.vast.impressionSent&&(m(this.vast.impressionUrl),this.vast.impressionSent=!0)};var I=function(){var t=function(){var e=p.play();e&&e.then(function(){i.scrollResizeHandler()}).catch(function(e){h.error(e)})},o=e.vpaidUrl||n.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA;/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(o=!0),o?t():n.addEventListener("loadeddata",function e(){o=!0,i.scrollResizeHandler(),n.removeEventListener("loadeddata",e),t()})};i.pending||I();var A=function(){null!=p&&(i.quartilesStarted||i.startRecordingQuartiles(),i.sendVastImpressionIfNecessary(),p.isPaused()&&(h.debug("IPlay started"),p.play()))},L=function(){if(!i.pending&&!l){var o=function(){var i=(e.inViewTarget||n).getBoundingClientRect();if(i.height<1||i.width<1)return!1;if(n.forcedVisibilityPercent>=e.visiPercent)return!0;var o=Math.ceil((100-e.visiPercent)*i.height/100),s=r.headerHeight+e.topMargin-o,a=t.innerHeight-r.footerHeight-e.bottomMargin+o;return i.top>=s&&i.bottom<=a}();if(o&&(c=!0,A()),!p.isPaused()&&!o){if((e.forever||e.playOnView)&&c)return;p.isPaused()||(h.debug("IPlay paused"),p.pause())}}};if(this.scrollResizeHandler=function(){setTimeout(function(){L()},150),L()},r.addEventListener("scrollresize",this.scrollResizeHandler),t.addEventListener("touchend",this.scrollResizeHandler),this.scrollResizeHandler(),e.playOnView){var S=function(){c=!0,A()};r.viewed?S():r.addEventListener("view",S)}var T=function(){i.quartileReporter&&i.quartileReporter.destroy(),i.vastQuartileReporter&&i.vastQuartileReporter.destroy(),p.isPaused()||p.pause(),u.forEach(function(e){e()})};this.destroy=T,r.addEventListener("beforeEngagement",T)},r.PlayC=function(e){this.options=e;var t,i=e.buttonContainer.querySelectorAll("[data-ivvid-src]");i=Array.prototype.slice.call(i);var n=function(i,n){var o=i.getAttribute("data-ivvid-src"),s=i.getAttribute("data-ivvid-type"),a=i.getAttribute("data-ivvid-id");t&&t.destroy();var d,l,c=(d=e.playOptions,l={},Object.keys(d).filter(function(e){return d.hasOwnProperty(e)}).forEach(function(e){l[e]=d[e]}),l);c.video=e.videoEl,c.id=a,"vast"===s?c.vastUrl=o:e.videoEl.src=o,t=new r.Play(c),n&&"vast"!==s&&t.unmute()};this.start=function(){i.forEach(function(t){t.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation(),n(t,e.unmuteOnClick)})}),n(i[0])}},r.Visi=function(e){(e=e||{}).target=e.target||{},e.target.percentage=e.target.percentage||50,e.forcePercentage=e.forcePercentage||e.target.percentage,e.target.duration=e.target.duration||1e3,e.safetyMargin=e.safetyMargin||0;var i,n=0,s=!1,a=0,d=(new Date).getTime(),l=r.adDiv,c=e.target.element||l;l.style.transition="transform 0.01s ease-in-out";var u=function(){if(i=null,!e.target.met){var t=2===n||r.getClientVerticalVisibilityPercent(c)>=e.target.percentage,o=(new Date).getTime(),l=s&&t;if(l?a+=o-d:e.target.continuous&&(a=0),e.debug&&h.info({name:"Visi info",now:o,rollingDuration:a,wasVisible:s,isCurrentlyVisible:t}),l&&a>=e.target.duration)return h.info("Visibility target reached!"),e.target.met=!0,void b();t&&(i=setTimeout(u,e.target.duration)),s=t,d=o}},v=o.createElement("div");l.parentElement.insertBefore(v,l),v.style.display="none";var f=function(){var e=l.getBoundingClientRect();e.height<1?t.setTimeout(f,30):(v.style.width=e.width+"px",v.style.height=e.height+"px")};f();var p,m={},g=function(){if(!e.target.met&&(i||(i=setTimeout(u,100)),0===n)){var o=r.headerHeight,s=t.innerHeight-r.footerHeight,a=c.getBoundingClientRect(),d=a.height*e.forcePercentage/100+1,v=a.height-d,f=a.top+v,m=a.bottom-v,g=o-f>0,h=s-m<0;self.topWasVisible=self.topWasVisible||f>=o&&f<=s,self.bottomWasVisible=self.bottomWasVisible||m>=o&&m<=s,g&&self.topWasVisible?(p=!0,y()):h&&self.bottomWasVisible?(p=!1,y()):(n=0,l.style.transform="translateY(0px)")}},y=function(){n=2,v.style.display="block",l.classList.remove("ivVisiInTransition"),l.classList.add("ivVisiActive");var t,i=c.getBoundingClientRect(),o=i.height*(e.forcePercentage/100)+1,s=i.height-o,a=l.getBoundingClientRect(),d=i.top-a.top,u=a.bottom-i.bottom,f=d+s-r.headerHeight,g=u+s-r.footerHeight;m.transition=l.style.transition,m.position=l.style.position,m.width=l.style.width,m.height=l.style.height,m.left=l.style.left,m.top=l.style.top,m.bottom=l.style.bottom,l.style.transition="none",l.style.transform="translateY(0)",l.style.position="fixed",l.style.setProperty("width",a.width+"px","important"),l.style.height=a.height+"px",l.style.left=a.left+"px",p?(t=o+u,l.style.top=-f+"px"):(t=o+d,l.style.bottom=-g+"px"),l.forcedVisibilityPercent=100*t/a.height,l.forcedVisibilityPixels=t,c.forcedVisibilityPercent=e.forcePercentage,c.forcedVisibilityPixels=o,r.dispatchEvent("scrollresize")};l.addEventListener("transitionend",function(){e.target.met&&b()});var b=function(){if(2===n){delete l.forcedVisibilityPercent,delete l.forcedVisibilityPixels,delete c.forcedVisibilityPercent,delete c.forcedVisibilityPixels,n=3,l.classList.remove("ivVisiActive"),l.classList.add("ivVisiInTransition");var e=v.getBoundingClientRect().top,i=l.getBoundingClientRect().top-e;l.style.transition=m.transition,l.style.position=m.position,l.style.width=m.width,l.style.height=m.height,l.style.left=m.left,l.style.top=m.top,l.style.bottom=m.bottom,v.style.display="none",l.style.transition="none",l.style.transform="translateY("+i+"px)",t.setTimeout(function(){l.style.transition="transform 2s ease-in-out",l.style.transform="translateY(0px)",r.removeEventListener("scrollresize",g),l.addEventListener("transitionend",function e(t){n=0,l.classList.remove("ivVisiInTransition"),t.currentTarget.removeEventListener(t.type,e)})},30)}};return{start:function(){navigator.userAgent.match(/CriOS/i)?h.warn("Disabling Visi (Chrome on iOS)"):(r.addEventListener("scrollresize",g),u())}}},r.PanoramicPlay=function(e){var i,n=!0;null!=e.isAutoPlay&&(n=e.isAutoPlay);var s=r.currentAd.VideoCompletionTime,a=o.getElementById(e.video),d=new r.PanoramicPlayer(e,function(o){var l=this;o.volume=0,/iPhone|iPod|iPad/i.test(navigator.userAgent)||(i=new r.VideoQuartileReporter({videoElement:o,report:function(t){var i=e.id||o.getAttribute("data-ivVidId")||o.getAttribute("src");i="bv_"+i,r.sendUserVideoEventId(1300+t,i)}}));if(n){e.marginPercentage=e.marginPercentage||20;var c=o.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA;/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(c=!0),c||o.addEventListener("loadeddata",function e(){c=!0,l.scrollResizeHandler(),o.removeEventListener("loadeddata",e)});this.scrollResizeHandler=function(){if(!l.pending){var i,n,o,s,c,u,v=(i=t.innerHeight-r.headerHeight-r.footerHeight,n=i*e.marginPercentage/100,o=n,s=i-n,c=a.getBoundingClientRect(),u=(c.top+c.bottom)/2,o<=u&&s>=u);d.isPaused()&&v&&d.play(),d.isPaused()||v||d.pause()}},r.addEventListener("scrollresize",this.scrollResizeHandler),t.addEventListener("touchend",this.scrollResizeHandler),this.scrollResizeHandler()}else d.addEventListener("panoclick",function(){r.sendUserVideoEventId(943),d.isPaused()?d.play():d.pause()});var u=!1;o.addEventListener("timeupdate",function(){o.currentTime>s&&!u&&(u=!0,r.sendUserVideoEventId(1e3))}),r.addEventListener("beforeEngagement",function(){i&&i.destroy(),d.isPaused()||d.pause()})});d.addEventListener("panodrag",function(){c(),r.sendUserVideoEventId(941)}),d.addEventListener("panozoom",function(){r.sendUserVideoEventId(942)});var l=!1,c=function(){l||(r.sendUserVideoEventId(940),l=!0)};return{player:d}},r.PanoramicPlayer=function(e,t){e.krpanojs=e.krpanojs||s.krpanojs,e.gyrojs=e.gyrojs||s.gyrojs,e.videoplayerjs=e.videoplayerjs||s.videoplayerjs,e.followmousejs=e.followmousejs||s.followmousejs,e.viewH=e.viewH||0,e.viewV=e.viewV||0,e.zoom=e.zoom||130;var i,n,r=function(){var i,n,r='loadxml(\'<krpano> <action name="startup" autorun="onstart"> if(device.panovideosupport == true, loadscene(videopano);); </action> <scene name="videopano"> <control mouse="drag" touch="drag" zoomtocursor="false" zoomoutcursor="false" draginertia="0.1" dragfriction="0.9" movetoaccelerate="1.0" movetospeed="10.0" movetofriction="0.8" keybaccelerate="0.09" keybfriction="0.94" keybfovchange="0.25" mousefovchange="1.0" fovspeed="3.0" fovfriction="0.9" bouncinglimits="true" /> <cursors standard="default" dragging="move" moving="move" /> <krpano stagescale="calc:stagescale * 2" if="stagescale LT 1.0" devices="mobile" /><plugin name="followmouse" url="'+e.followmousejs+'" enabled="false" devices="desktop" videoelement="'+e.video+'" /> <plugin name="gyro" keep="true" url="'+e.gyrojs+'" devices="html5.and.touch" enabled="true" />',s='<view hlookat="'+e.viewH+'" vlookat="'+e.viewV+'" fovtype="DFOV" fov="'+e.zoom+'" fovmin="75" fovmax="150" distortion="0.0" />  </scene> </krpano>\')',a='<image> <sphere url="'+e.posterUrl+'" /> </image>',d='<plugin name="video" url.html5="'+e.videoplayerjs+'" pausedonstart="true" loop="true" volume="0" /> <image> <sphere url="plugin:video" /> </image>';(ue=o.getElementById("krpanoSWFObject")).style.display="none",e.audioUrl||e.videoUrl||e.webmUrl||!e.posterUrl?(i=r+d+s,n=function(){ue.set("events.onxmlcomplete",null);var i=ue.get("plugin[video]");i.onloaded=function(){var t=function(){var t="";return/iPhone|iPod|iPad/i.test(navigator.userAgent)?t=e.audioUrl:(e.videoUrl&&(t+=e.videoUrl),e.webmUrl&&(t.length>0&&(t+="|"),t+=e.webmUrl),t.length>0&&e.audioUrl&&(t+="|"+e.audioUrl)),t}();i.playvideo(t,e.posterUrl,!0,0)},i.onvideoready=function(){t(i.videoDOM),ue.style.display="block"},i.onvideoplay=function(){null!=e.playHandler&&e.playHandler()},i.onvideopaused=function(){null!=e.pausedHandler&&e.pausedHandler()}}):(i=r+a+s,n=function(){ue.set("events.onxmlcomplete",null),ue.style.display="block"}),ue.set("events.onxmlcomplete",n),ue.call(i)},a={play:function(){ue&&ue.call("plugin[video].play()")},pause:function(){ue&&ue.call("plugin[video].pause()")},isPaused:function(){var e=null;return ue&&(e=ue.get("plugin[video]").ispaused),e},setViewPos:function(e,t,i){ue&&(ue.call("lookat("+e+", "+t+")"),ue.call("zoomto("+i+")"))},getViewPos:function(){return ue?{viewH:ue.get("view.hlookat"),viewV:ue.get("view.vlookat"),zoom:ue.get("view.fov")}:null}};return ke(a),function(e,t){var i,n=[],o=[],r=!1,s=function(e){null!=e.pageX?o=[e.pageX,e.pageY]:e.touches&&e.touches.length>0&&(o=[e.touches[0].pageX,e.touches[0].pageY]),e.touches&&e.touches.length>1&&(r=!0),t.removeEventListener("mousemove",s),t.removeEventListener("touchmove",s)},a=function(i){null!=i.pageX?o=[i.pageX,i.pageY]:i.changedTouches&&i.changedTouches.length>0&&(o=[i.changedTouches[0].pageX,i.changedTouches[0].pageY]),0===o.length||n[0]===o[0]&&n[1]===o[1]?1==i.which&&e.dispatchEvent("panoclick"):r?e.dispatchEvent("panozoom"):e.dispatchEvent("panodrag"),t.removeEventListener("mouseup",a),t.removeEventListener("touchend",a)},d=function(e){n=[],o=[],r=!1,null!=e.pageX?n=[e.pageX,e.pageY]:e.touches&&e.touches.length>0&&(n=[e.touches[0].pageX,e.touches[0].pageY]),t.addEventListener("mousemove",s,!1),t.addEventListener("touchmove",s,!1),t.addEventListener("mouseup",a,!1),t.addEventListener("touchend",a,!1)};t.addEventListener("mousedown",d,!1),t.addEventListener("touchstart",d,!1);var l=function(){i&&clearTimeout(i),i=setTimeout(function(){e.dispatchEvent("panozoom")},500)};t.addEventListener("mousewheel",l,!1),t.addEventListener("DOMMouseScroll",l,!1)}(a,(i=o.getElementById(e.video),(n=o.createElement("script")).src=e.krpanojs,n.onload=function(){embedpano({xml:null,target:e.video,html5:"only",mobilescale:1,passQueryParameters:!0,onready:r})},i.parentNode.insertBefore(n,i),i)),a},r.Reveal=function(e){var i="string"==typeof e.container?o.getElementById(e.container):e.container,n=!1,s=!1;v();var a=function(){s||(s=!0,t.requestAnimationFrame?requestAnimationFrame(function(){v()}):setTimeout(function(){v()},100))};t.addEventListener("scroll",a),t.addEventListener("resize",a);var d=i.querySelector(".cd-handle"),l=i.querySelector(".cd-resize-img"),c=i.querySelector('.cd-image-label[data-type="original"]'),u=i.querySelector('.cd-image-label[data-type="modified"]');function v(){i.getBoundingClientRect().top>0&&i.classList.add("is-visible"),s=!1}function f(e,t,i,o,r,s,a,d,l,c,u){var v=(e.pageX||e.touches[0].pageX)+i-o;v<r?v=r:v>s&&(v=s);var f=100*(v+o/2-a)/d;g();var p=f+"%";if(t&&t.classList.contains("draggable")){t.style.left=p;var m=function(){t.classList.remove("draggable"),l.classList.remove("resizable")};t.addEventListener("mouseup",m),t.addEventListener("touchend",m)}l&&l.classList.contains("resizable")&&(l.style.width=p),h(u,l,"left"),h(c,l,"right"),n=!1}!function(e,i,o,s,a){var d,l=function(){e.classList.remove("draggable"),i.classList.remove("resizable"),o.removeEventListener("mousemove",d),o.removeEventListener("touchmove",d)},c=function(c){e.classList.add("draggable"),i.classList.add("resizable");var u=e.getBoundingClientRect(),v=o.getBoundingClientRect(),p=c.pageX||c.touches[0].pageX,m=u.width,g=u.left+m-p,h=v.left,y=v.width,b=h-22,E=h+y-m+22;d=function(o){n||(n=!0,r.dispatchEvent("ivSliderDrag",this),t.requestAnimationFrame?requestAnimationFrame(function(){f(o,e,g,m,b,E,h,y,i,s,a)}):setTimeout(function(){f(o,e,g,m,b,E,h,y,i,s,a)},100))},o.addEventListener("mousemove",d),o.addEventListener("touchmove",d),o.addEventListener("mouseup",l),o.addEventListener("touchend",l),c.preventDefault()};e.addEventListener("mousedown",c),e.addEventListener("touchstart",c),e.addEventListener("mouseover",c),e.addEventListener("mouseup",l),e.addEventListener("touchend",l)}(d,l,i,c,u);var p,m=function(){r.dispatchEvent("ivSliderDragGesture",this)},g=function(){p&&t.clearTimeout(p),p=t.setTimeout(m,400)};function h(e,t,i){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();("left"===i?n.right>=o.right:n.left<=o.right)?e.classList.add("is-hidden"):e.classList.remove("is-hidden")}},r.SwipeNSurf=function(e){var i=function(e){var i=r.createOutgoingLink(e);r.sendClickStats(p,"swipe");var n=r.clickSentPromise,o=new Promise(function(e){t.setTimeout(e,1e3)});Promise.race([n,o]).then(function(){t.location.assign(i)})};e.outgoingSlides&&e.swiper.on("slideChangeEnd",function(){r.handleAdSwipe();var t=e.outgoingSlides[e.swiper.realIndex];t&&(r.doNotHideAdOnClick=1,i(t),r.hide())}),e.lastSlideRedirect&&e.swiper.on("reachEnd",function(){e.swiper.on("touchMove",function(t){t.isEnd&&"next"==t.swipeDirection&&(r.doNotHideAdOnClick=1,i(e.lastSlideRedirect),r.hide())})})},r.videoCompletion=function(e){var t="string"==typeof e.el?o.getElementById(e.el):e.el;return new Promise(function(i){var n=function(){isNaN(t.duration)||(t.currentTime>=e.time||100*t.currentTime/t.duration>=e.percent)&&(h.log("Video target completed."),i(),t.removeEventListener("timeupdate",n))};t.addEventListener("timeupdate",n),t.addEventListener("videotargetchanged",function e(i){t.removeEventListener("timeupdate",n),t.removeEventListener("videotargetchanged",e),(t=i.newVideoTarget).addEventListener("timeupdate",n)})})},r.Sticky=function(e){var i=this,n=e.el;e.bottomMargin=e.bottomMargin||0,e.topMargin=e.topMargin||0;var a,d,l,c,u,v=r.FullscreenApi(),f=function(){var e=o.createElement("div");e.style.display="none",e.classList.add("ivStickyPlaceholder");var i=function(){var o=n.getBoundingClientRect();o.height<1?t.setTimeout(i,50):(e.style.width=o.width+"px",e.style.height=o.height+"px")};return i(),n.parentElement.insertBefore(e,n),{hide:function(){e.style.display="none"},show:function(){e.style.display="block"},el:e}}(),p=new Promise(function(t){e.closeBtn&&e.closeBtn.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),i.dispatchEvent("clickClose"),t()})}),m=new Promise(function(e){i.close=e}),g=new Promise(function(){}),y=new Promise(function(e){r.addEventListener("beforeEngagement",e)}),b=Promise.race([e.endStickyPromise||g,p,y,m]),E=0,k={},C=n.querySelector("#ivbsVid"),w=function(){n.style.width=k.width,n.style.height=k.height,n.style.top=k.topheight,n.style.bottom=k.bottom,n.style.left=k.left,n.classList.remove("ivStuckTop"),n.classList.remove("ivStuckBottom"),e.noParentDetach||(n.parentElement.removeChild(n),f.el.parentElement.insertBefore(n,f.el)),C&&(delete C.forcedVisibilityPercent,delete C.forcedVisibilityPixels),delete n.forcedVisibilityPercent,delete n.forcedVisibilityPixels,d=l=!1},I=function(){n.classList.remove("ivStuckTop"),n.classList.remove("ivStuckBottom"),d=l=!1,k.width=n.style.width,k.height=n.style.height,k.top=n.style.top,k.bottom=n.style.bottom,k.left=n.style.left;var t=n.getBoundingClientRect();if(n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.left=t.left+"px",C){var i=C.getBoundingClientRect();C.forcedVisibilityPercent=100,C.forcedVisibilityPixels=i.height}n.forcedVisibilityPercent=100,n.forcedVisibilityPixels=t.height,e.noParentDetach||(n.parentElement.removeChild(n),o.body.appendChild(n)),f.show()},A=function(){if(!(r.adDiv.getBoundingClientRect().height<1||v.isFullscreen())){var o=(d||l?f.el:n).getBoundingClientRect(),s=o.top<=(e.topMargin||0)+r.headerHeight,u=o.top+o.height>=t.innerHeight-(e.bottomMargin||0)-r.footerHeight;a||s||u||(a=!0),(!s&&d||!u&&l)&&(f.hide(),w(),i.dispatchEvent("unstuck")),!a||!s||d||r.Sticky.noTop||r.videoZoomed&&e.noStickyOnZoom||(I(),n.style.top=e.topMargin+r.headerHeight+"px",n.classList.add("ivStuckTop"),d=!0,i.dispatchEvent("stuck",i,["top"])),!a||!u||l||r.Sticky.noBottom||r.videoZoomed&&e.noStickyOnZoom||(I(),n.style.bottom=e.bottomMargin+r.footerHeight+"px",n.style.top="",n.classList.add("ivStuckBottom"),l=!0,i.dispatchEvent("stuck",i,["bottom"])),!d&&!l||c||(c=!0,t.setTimeout(function(){n.classList.add("ivCanClose")},e.closeDelay))}};b.then(function(){r.removeEventListener("scrollresize",A),i.dispatchEvent("complete"),function(){if(d||l){i.dispatchEvent("unstuck"),f.hide();var e=n.getBoundingClientRect();w();var o=n.getBoundingClientRect(),s=e.left-o.left,a=e.top-o.top;n.style.transform="translateX("+s+"px)translateY("+a+"px)",t.setTimeout(function(){n.classList.add("ivAnimTrans"),t.setTimeout(function(){n.style.transform="",n.addEventListener("transitionend",function e(){r.dispatchEvent("scrollresize"),n.classList.remove("ivAnimTrans"),n.removeEventListener("transitionend",e)})},10)},10)}}()});this.start=function(){var n,o,a,d,l;r.currentAd.Sticky?(h.info("Sticky!"),r.addEventListener("scrollresize",A),A(),o=r.videoAdContentResult.StickyCFIDelay||e.cfiDuration||4e3,a=function(){i.removeEventListener("stuck",d),i.removeEventListener("unstuck",l),r.removeEventListener("click",l),r.jsonpWithParams(s.kwebstatUrl+"/bvr/cfi",{token:r.currentAd.Token}),i.dispatchEvent("cfi")},d=function(){if(!r.clicked){u=(new Date).getTime();var i=o-(e.cfiContinuous?0:E);n=t.setTimeout(a,i)}},l=function(){var e=(new Date).getTime();E+=e-u,n&&t.clearTimeout(n)},i.addEventListener("stuck",d),i.addEventListener("unstuck",l),r.addEventListener("click",l)):h.warn("No Sticky")},ke(this)},r.VPAIDPlayer=(ve="2.0.0",fe="normal",pe="fullscreen",me={INIT:1,LOADED:2,PLAYING:3,PAUSED:4,STOPPED:5,FAILED:6},function(e,t){var i,n=e.fileSettings,s=e.params,a=e.video,d=e.eventHandler,l=e.vpaidHasRedirect,c=!e.noLoop,u=e.indexVideoOnFinish,v=null;if(!n)throw"Invalid VPAID file";d=d||r.sendUserVideoEventId;var f,p,m=me.INIT,g=n.id||a.getAttribute("data-ivVidId")||a.getAttribute("src");g="bv_"+g,f=function(e){var o=(i=e).handshakeVersion(ve);if(o===ve||0==ve.indexOf(o)){i.subscribe(function(e){b("VPAID failure: "+e)},"AdError",this),i.subscribe(function(){h.log("VPAID AdLoaded"),m=me.LOADED,null!=t&&t()},"AdLoaded",this),i.subscribe(function(){h.log("VPAID AdStarted"),m=me.PLAYING,function(){if("function"==typeof i.getAdRemainingTime&&"function"==typeof i.getAdDuration){var e=new k("videotargetchanged");e.newVideoTarget=y,a.dispatchEvent(e);var t=function(e){setTimeout(function(){i.getAdRemainingTime;var n=i.getAdDuration(),o=i.getAdRemainingTime(),r=n-o;r=r>=0?r:0,y.currentTime=r,y.duration=n,e!==r&&y.dispatchEvent("timeupdate"),m!==me.STOPPED&&m!==me.FAILED&&t(r)},500)};t(i.getAdRemainingTime())}}(),v=a.src},"AdStarted",this),i.subscribe(function(){h.log("VPAID AdStopped"),m=me.STOPPED,null!=u&&""!=u&&(a.style.zIndex=u,a.style.position="relative"),c&&function(){a.currentTime=0;try{a.src||(a.src=v);var e=a.play();e&&e.then(function(){}).catch(function(e){a.src=v,a.play()})}catch(e){a.src=v,a.play()}a.addEventListener("ended",function(){a.currentTime=0,a.play()})}()},"AdStopped",this),i.subscribe(function(){h.log("VPAID AdPaused"),m=me.PAUSED},"AdPaused",this),i.subscribe(function(){h.log("VPAID AdPlaying"),m=me.PLAYING},"AdPlaying",this),i.subscribe(function(){d(3100,g)},"AdImpression",this),i.subscribe(function(){d(3101,g),l&&(r.vpaidClickedThrough=1)},"AdClickThru",this),i.subscribe(function(){d(3e3,g)},"AdVideoStart",this),i.subscribe(function(){d(3025,g)},"AdVideoFirstQuartile",this),i.subscribe(function(){d(3050,g)},"AdVideoMidpoint",this),i.subscribe(function(){d(3075,g)},"AdVideoThirdQuartile",this),i.subscribe(function(){d(3099,g)},"AdVideoComplete",this);var f={AdParameters:s},p={slot:a.parentElement,videoSlot:a};i.initAd(a.parentElement.offsetWidth,a.parentElement.offsetHeight,fe,n.bitrate,f,p)}else b("VPAID version not supported: "+o)},(p=o.createElement("iframe")).name="ivbs-loading-frame",p.style.display="none",p.onload=function(){var e=p.contentDocument;!e&&p.contentWindow&&(e=p.contentWindow.document);var t=e.createElement("script");t.type="text/javascript",t.src=n.src,t.onload=function(){var t=e.createElement("script");t.type="text/javascript",t.text="var vpaid = getVPAIDAd();",e.body.appendChild(t),f(p.contentWindow.vpaid)},e.body.appendChild(t)},o.body.appendChild(p);var y={src:a.src,currentTime:a.currentTime,duration:a.duration,getAttribute:function(e){return a.getAttribute(e)}};return ke(y),{play:function(){switch(m){case me.INIT:var e=new Promise(function(e){!function e(t){setTimeout(function(){m===me.INIT?e(t):t()},100)}(e)});return e;case me.LOADED:return void i.startAd();case me.PLAYING:return;case me.PAUSED:return i.pauseAd(),void i.resumeAd();case me.STOPPED:return void a.play();case me.FAILED:return}},pause:function(){m===me.STOPPED&&a.pause(),m===me.PLAYING&&i.pauseAd()},stop:function(){m>=me.LOADED&&i.stopAd()},isPaused:function(){return m===me.STOPPED?a.paused:m!==me.PLAYING},mute:function(){a.muted=!0,m===me.STOPPED?a.volume=0:(a.volume=0,i.setAdVolume(0))},unmute:function(){a.muted=!1,m===me.STOPPED?a.volume=1:(a.volume=1,i.setAdVolume(1))},resize:function(e){if(m===me.STOPPED)a.style.width="100%",a.style.height="100%";else{var t=a.parentElement;i.resizeAd;var n=2,o=function(r,s){setTimeout(function(){var a=t.offsetWidth,d=t.offsetHeight;if(r!==a||s!==d){n=2;var l=e?pe:fe;i.resizeAd(a,d,l),o(a,d)}else--n>=0&&o(a,d)},25)};o(t.offsetWidth,t.offsetHeight)}},timedVideo:y};function b(e){m=me.FAILED,d(3999,JSON.stringify({videoId:g,error:e}))}}),r.Configurator=function(e){e.useDefaultSelections=null==e.useDefaultSelections||e.useDefaultSelections;var t=o.getElementsByClassName(e.parseFrom)[0]||o.getElementsByClassName("ivbsGeneral")[0]||o,i=o.getElementById(e.img),n=[],s=[],a=function(e){for(var t=0;t<5;){if("a"==e.nodeName.toLowerCase()&&e.getAttribute("outgoing-href"))return e;e=e.parentNode,t++}},d=function(t,o,r){var d,c=function(t,i){for(var n=[],o=0;o<e.dependencies.length;o++){for(var r=e.dependencies[o].depArray,a=!0,d=0;d<t-1;d++)if(e.dependencies[o].depArray[d]!=s[d]){a=!1;break}a&&r[t-1]==i&&null!=r[t]&&n.push(r[t].toString())}return n}(t,o),u=s[t],v=null!=r?r[t]:null,f=!1;if(0!==c.length&&null!=n[t])for(var p=0;p<n[t].length;p++){var m=n[t][p];null!=v&&v==m.ivcfgIndexValue?(m.style.display="inline-block",d=m,v!=u&&(f=!0)):c.indexOf(m.ivcfgIndexValue)>-1?(m.style.display="inline-block",d=d||m):(m.style.display="none",null!=u&&m.ivcfgIndexValue!=u||(f=!0))}f?l(d,r,!1):function(){for(var t=0;t<e.dependencies.length;t++){for(var n=e.dependencies[t].depArray,o=!0,r=0;r<n.length;r++)if(n[r]!=s[r]&&void 0!==s[r]){o=!1;break}if(o){if(i.src=e.dependencies[t].img,e.dependencies[t].link){var d=a(i);Z(d,e.dependencies[t].link)}break}}}()},l=function(t,i,o){var a=t.ivcfgIndex,l=t.ivcfgIndexValue;s[a-1]!=l&&(s[a-1]=l,function(t,i){for(var o=0;o<n[t-1].length;o++){var r=n[t-1][o];r.ivcfgIndexValue==i?r.classList.add(e.activeClass):r.classList.remove(e.activeClass)}}(a,l),o&&r.sendUserVideoEventId(7e3,l),d(a,l,i))},c=function(t){for(var i=0;i<e.dependencies.length;i++)if(e.dependencies[i].depArray[0]==t.ivcfgIndexValue)return e.dependencies[i].depArray;return null};return{init:function(){for(var i=!0,o=0,s=!1;i;){o++;var a="data-ivcfg-"+(e.mapping[o]||o),d=t.querySelectorAll("["+a+"]");if(0===d.length)i=!1;else{n.push(d);for(var u=0;u<d.length;u++){var v=d[u];v.ivcfgIndex=o,v.ivcfgIndexValue=v.getAttribute(a),v.onclick=function(t){var i=null;1==this.ivcfgIndex&&e.useDefaultSelections&&(i=c(this)),s||(r.sendUserVideoEventId(930,e.mapping[this.ivcfgIndex]||this.ivcfgIndex),s=!0),l(this,i,!0)}}}}var f=function(){for(var t=0;t<n[0].length;t++)if(n[0][t].ivcfgIndexValue==e.dependencies[0].depArray[0])return n[0][t];return null}();l(f,c(f),!1)}}},r.LoopWriter=function(e){var t=new Array(e.text),n=e.speed||100,r=e.maxRows||2,s=0,a=0,d=t[a].length,l=o.getElementById(e.textContainer),c=l.cloneNode(!0);l.parentNode.insertBefore(c,l),l.style.marginTop=0,l.style.paddingTop=0,c.style.marginBottom=0,c.style.paddingBottom=0,c.style.opacity=1,c.style.maxHeight="1500px",c.style.transition="opacity 0.5s, max-height 1s";var u=function(){var e,v=null;(e=l).offsetHeight/parseInt(e.style.lineHeight||o.defaultView.getComputedStyle(e,null).getPropertyValue("lineHeight")||o.defaultView.getComputedStyle(e,null).getPropertyValue("line-height"))>r&&(v=function(e){var t;for(i=e.innerHTML.length-1;i>=0;i--)if(" "==e.innerHTML[i]){t=i;break}return t}(l)),v>0&&(c.innerHTML=l.innerHTML.substring(0,v-1),l.innerHTML=l.innerHTML.substring(v,l.innerHTML.length),c.style.opacity=0,c.style.maxHeight=0,setTimeout(function(){c.innerHTML="",c.style.opacity=1,c.style.maxHeight="1500px"},1500)),l.innerHTML=l.innerHTML+t[a][s],s++==d?(s=0,l.innerHTML="",++a!=t.length?(d=t[a].length,setTimeout(u,500)):(a=0,d=t[0].length,setTimeout(u,500))):setTimeout(u,n)};return{start:function(){u()}}},r.initVideoSwiper=function(e){for(var i={},n={},o=1,s=function(e,s){var a=new r.InlinePlayer(e),d=e.getAttribute("data-ivvidid")||e.src;new r.VideoQuartileReporter({videoElement:e,report:function(e){!function(e,t){var n=e+t;i[n]||(r.sendUserVideoEventId(1300+t,e),i[n]=1)}(d,e)}}),e.addEventListener("ended",function(t){e.currentTime=0,e.play()});var l={play:function(){e.paused&&(e.readyState>0?(e.currentTime=n[d]||0,a.play()):t.setTimeout(function(){l.play()},50))},pause:function(){e.paused||(n[d]=e.currentTime,a.pause())},isMuted:function(){return e.muted},mute:function(){this.isMuted()||(e.volume=0,e.muted=!0,s&&(s.classList.add("ivMute"),s.classList.remove("ivUnmute")))},unmute:function(){this.isMuted()&&(e.volume=1,e.muted=!1,s&&(s.classList.remove("ivMute"),s.classList.add("ivUnmute")))},toggleMute:function(){this.isMuted()?(this.unmute(),r.sendUserVideoEventId(o?3500:3501),o=!1):this.mute()}};return function(e,t){t&&t.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.toggleMute()})}(l,s),l},a=[],d=0;d<e.slides.length;d++){var l=e.slides[d],c=l.querySelector("[data-ivvidid]"),u=l.querySelector('[data-role="unmute"]');c&&(video=s(c,u),video.mute(),a[d]=video)}var v=!1,f=function(){return a[e.activeIndex]},p=f();e.on("onSlideChangeEnd",function(){r.handleAdSwipe(),p=f(),v&&p&&p.play()}),e.on("onSlideChangeStart",function(){v&&p&&(p.pause(),p.mute())});var m=function(){v=!0,p&&p.play()};r.viewed?m():r.addEventListener("view",function e(){m(),r.removeEventListener("view",e)}),r.addEventListener("scrollresize",function(){r.getClientVerticalVisibilityPercent(r.adDiv)<80&&p&&p.mute()}),r.addEventListener("click",function(){p&&(p.pause(),p.mute())})},r.Locator=function(e){var t=["mousedown","mouseup","mousemove","pointerdown","pointerup","pointermove","MSPointerDown","MSPointerUp","MSPointerMove","touchstart","touchend","touchmove"],i=function(){var t=[];if(null!=e.id)t.push(o.getElementById(e.id));else for(var i=o.getElementsByClassName(e.class),n=0;n<i.length;n++)t.push(i[n]);return t},n=function(i){i.name="ivbs-locator-frame",i.style.width="100%",i.style.height="100%",i.style.margin="0 !important",i.style.border="none",i.border=0,i.frameBorder=0;var n,o="<style>body {margin: 0px;} .scrolloff { pointer-events: none; } </style><div style='height:100%' id='map'></div><script async defer src='https://maps.googleapis.com/maps/api/js?key="+e.apiKey+"&callback=initMap'><\/script>";!(n=i.contentDocument)&&i.contentWindow&&(n=i.contentWindow.document),n.open("text/html"),n.write(o),n.close(),"cooperative"==e.gesture&&function(e){for(var i=null,n=0,o=1,s=0;s<t.length;s++)e.addEventListener(t[s],function(t){if("touchend"!=t.type&&"mouseup"!=t.type||(o=1,n=0,i=null),"touchmove"==t.type||"mousemove"==t.type){if(null==t.changedTouches||0==t.changedTouches.length)return;var s=t.changedTouches[0].clientX;if(null==i)i=s;else if(s>=i){if(1==n)return o=1,void(n=0);if(0==n){if(o<3)return o++,void(i=s);n=-1,o=0,i=s}else o=0,i=s}else if(s<i){if(-1==n)return o=1,void(n=0);if(0==n){if(o<3)return o++,void(i=s);n=1,o=0,i=s}else o=0,i=s}}var a=1===r.deviceType?new MouseEvent(t.type,t):new TouchEvent(t.type,t);e.frameElement.parentNode.dispatchEvent(a)})}(i.contentWindow),i.contentWindow.config=e,i.contentWindow.eval("var initMap = "+function(){var e=this.document.getElementById("map"),t={lat:this.config.latitude,lng:this.config.longitude},i=new google.maps.Map(e,{zoom:this.config.zoom,center:t,disableDefaultUI:!0,zoomControl:!0,gestureHandling:this.config.gesture});new google.maps.Marker({position:t,map:i})}.toString()),i.style.display="inline-block"};return{initAllMaps:function(){if(function(e){if(!r.currentAd.CampaignGeoTag||!r.currentAd.CampaignGeoTag.Locator){if(!e.apiKey)return h.error("Locator configs not found in BV. Will not generate a Locator"),!1;h.warn("Geo Tag and/or Javascript_V2 locator is not configured for this campaign. Will try to only use configs from BV")}return e.apiKey=e.apiKey||r.currentAd.CampaignGeoTag.Locator.ApiKey,e.latitude=e.latitude||parseFloat(r.currentAd.CampaignGeoTag.Locator.Latitude),e.longitude=e.longitude||parseFloat(r.currentAd.CampaignGeoTag.Locator.Longitude),e.zoom=e.zoom||parseInt(r.currentAd.CampaignGeoTag.Locator.Zoom),e.gesture=e.gesture||"greedy",!0}(e))for(var t=i(),o=0;o<t.length;o++)n(t[o])}}},r.PhotoChannel=function(e){var t=new IvSwiper(e.swiperConfig.container,e.swiperConfig.params);new r.Slider(t,{clickHandler:function(e){}}).start(),setTimeout(function(){t.update(),r.initializeAllOutgoingLinks()},500);for(var i=null!=e.channelConfig.img?o.getElementById(e.channelConfig.img):null,n=null!=e.channelConfig.title?o.getElementById(e.channelConfig.title):null,s=null!=e.channelConfig.desc?o.getElementById(e.channelConfig.desc):null,a=o.getElementsByClassName(e.channelConfig.slide),d=e.channelConfig.activeTarget?o.getElementsByClassName(e.channelConfig.activeTarget):a,l=function(e){for(var t=0;t<d.length;t++)d[t]!=e?d[t].classList.remove("activeSlider"):d[t].classList.add("activeSlider")},c=0;c<d.length;c++)d[c].addEventListener("click",function(){l(this)});for(c=0;c<a.length;c++)a[c].addEventListener("click",function(){i&&(i.src=this.getAttribute("data-img")),n&&(n.innerHTML=this.getAttribute("data-title")),n&&this.getAttribute("data-titleBg")&&(n.style.backgroundColor=this.getAttribute("data-titleBg")),s&&(s.innerHTML=this.getAttribute("data-desc")),r.sendStatwebStats(950,this.getAttribute("data-id"))})},r.Reveal2=function(e){var t,i,n,s,a=o.getElementById(e.container),d=o.getElementById("ivbsMasker"),l=o.getElementById("ivbsRing"),c=o.getElementById("ivbsDot"),u=o.getElementById("ivbsProgressRing"),v=o.getElementById("ivbsProgressCounter"),f=e.minRadius||50,p=e.maxRadius||300,m=e.maxFirstPassRadius||150,g=e.zoomSpeed||10,h=function(){return(100*(i-f)/(p-f)).toFixed()},y=function(e){null!=u&&(e<=0?(e=0,u.setAttribute("stroke-dashoffset","252.363"),u.setAttribute("stroke-dasharray","none")):e>=100?(e=100,u.setAttribute("stroke-dashoffset","0"),u.setAttribute("stroke-dasharray","0px, 999999px")):(u.setAttribute("stroke-dashoffset",252*e/100),u.setAttribute("stroke-dasharray","252.363px, 262.363px"))),null!=v&&(v.textContent=e)},b=function(e,t){d.setAttribute("cx",e),d.setAttribute("cy",t),l.setAttribute("cx",e),l.setAttribute("cy",t),c.setAttribute("cx",e),c.setAttribute("cy",t)},E=function(){l.style.opacity=0,c.style.opacity=0},k=function(){l.style.opacity=1,c.style.opacity=1},C=function(){0!=t&&(-1==t&&i<=f?i=f:1==t&&i>=p?i=p:(i+=g*t,d.setAttribute("r",i),y(h()),setTimeout(C,50)))},w=function(e){if(0==t){if(-1==e&&i<=f)return i=f,void(s=!1);1==e&&i>=m&&(e=-1),i+=.8*g*e,d.setAttribute("r",i),y(h()),setTimeout(function(){w(e)},50)}else s=!1},I=function(e){if(!s&&null!=e.changedTouches&&e.changedTouches.length>0){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,n=a.getBoundingClientRect(),o=n.x||n.left,r=n.y||n.top;t>o&&t<o+n.width&&i>r&&i<r+n.height?k():E()}},A=function(e){var t,i;null!=e.clientX?(t=e.clientX,i=e.clientY):null!=e.changedTouches&&e.changedTouches.length>0&&(t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY);var n=a.getBoundingClientRect(),o=t-n.left,r=i-n.top;b(o,r)},L=function(){o.removeEventListener("mouseup",L),o.removeEventListener("touchend",L),t=-1,r.sendStatwebStats(915,(Date.now()-n)/1e3),C()},S=function(){o.addEventListener("mouseup",L),o.addEventListener("touchend",L),n=Date.now(),t=1,C()},T=function(){r.getClientVerticalVisibilityPercent(r.adDiv)>75&&(r.removeEventListener("scrollresize",T),s=!0,b(a.offsetWidth/2,a.offsetHeight/2),k(),w(1),a.addEventListener("mousemove",A),a.addEventListener("touchmove",A),e.zoom&&(a.addEventListener("mousedown",S),a.addEventListener("touchstart",S)),a.addEventListener("mouseleave",E),a.addEventListener("mouseenter",k),o.addEventListener("touchmove",I))};return{init:function(){E(),i=f,d.setAttribute("r",i),t=0,r.addEventListener("scrollresize",T),T()}}};r.addEventListener("adRendered",function(){var e=function(e,t,i,n){e&&$({target:e,duration:i,checkpoints:[n],onCheckpointReached:function(){r.sendUserVideoEventId(t)}})};e(r.adDiv,3400,2e3,50);var t=r.currentAd;t.InfeedIABDuration&&t.InfeedIABPercent&&e(r.adDiv,3300,1e3*t.InfeedIABDuration,t.InfeedIABPercent);var i=r.adDiv.querySelector("#ivbsVid");i&&t.VideoIABDuration&&t.VideoIABPercent&&e(i,3200,1e3*t.VideoIABDuration,t.VideoIABPercent)}),null!=r.bidResponse&&(de||(de=!0,xe(),Ve()))}function ke(e){var t={};e.addEventListener=function(e,i){i.constructor===Function&&(t[e]=t[e]||[],t[e].push(i))},e.removeEventListener=function(e,i){var n=t[e]||[],o=n.indexOf(i);o>-1&&n.splice(o,1)},e.dispatchEvent=function(e,i,n){var o=(t[e]||[]).slice(0);for(var r in o)if(o.hasOwnProperty(r))try{o[r].apply(i,n||[])}catch(e){h.error(e)}}}function Ce(){return o.getElementById("divVideoStepAdTop2")||o.getElementById("divVideoStepAdTop")||o.getElementById("divVideoStepAdBottom")}function we(e){var t={userCookieId:r.id,vId:r.visitId,width:n.window.innerWidth,height:n.window.innerHeight,minifiedScriptList:r.prod||function(){var e=o.querySelector('[id^="_videoStepMinifiedScript+"]');if(e)return e.value}()};for(var i in r.getCookie(w)&&(t[w]=1),t)t.hasOwnProperty(i)&&(e[i]=t[i])}function Ie(e){return!0===e&&(t.onbeforeunload=t.onpagehide=null),M||(M=!0,t.removeEventListener("beforeunload",Ie),t.removeEventListener("pagehide",Ie),Q(101),function(){if(t.VsSentOnBeforeUnloadStats)return;t.VsSentOnBeforeUnloadStats=!0;var e=(new Date).toISOString(),i=s.kwebstatUrl+"/Stat/RegisterSewebDuration";i+="?pageId="+r.videoAdContentResult.PageId,i+="&startDate="+r.vsSewebStartTime,i+="&endDate="+e,i+="&lId="+encodeURIComponent(r.dom.id),i+="&vId="+encodeURIComponent(r.visitId),i+="&videoExposedId="+r.currentAd.VideoExposedId,r.jsonp(i)}()),""}function Ae(){var e=function(){var e={};try{e=JSON.parse(localStorage.ivbs)}catch(e){}for(var i,n=/[\\?&]([^=]+)=([^\\?&#]+)/g;null!=(i=n.exec(t.location.href));)i.index===n.lastIndex&&n.lastIndex++,e[i[1].toLowerCase()]=i[2];return e}(),i={location:d(),lId:r.dom.id,videoAdHtmlId:u(),showFallback:"0"===e.advs,ivbsCampIdsLocal:r.getCookie("IvbsCampIdsLocal"),blk:y,noc:!g,oi:r.optIn},n=x.getCappedCampaignsAsString();n&&(i.capCounts=n),r.latency&&(i.l=r.latency),r.adDiv=Ce(),r.adDiv&&(i.aci=r.adDiv.getAttribute("id"));var o="videoAdDebug,ADVS,BVCI,BVID,istop,trybvid,trybvci".toLowerCase().split(",");for(var a in e)if(e.hasOwnProperty(a)){var l=e[a];(o.indexOf(a)>-1||/^vs|^invib/i.test(a))&&(i[a]=l)}return g||(i.advs=0),we(i),s.videoAdDomain+"/VideoAd/VideoAdContent?"+v(i)}function Le(){if(Se(),!q&&null==N.BidModel){q=!0;var e=N.FallbackScript;if(e){var t=o.createElement("script");t.type="text/javascript",t.text=e,o.head.appendChild(t),j(-41)}}}function Se(){Y.forEach(function(e){Q.apply(null,e)}),Y=[]}function Te(e){var t=r.currentAd.CampaignGeoTag;if(t&&t.TagReplacements){var i=t.TagReplacements;for(var n in i)if(i.hasOwnProperty(n)){var o=new RegExp("\\["+n+"\\]","g"),s=i[n];e=e.replace(o,s)}}return e}function Pe(e){return!!e&&(!r.adDisplayed&&K(e))}function Ve(e){var i=function(e,i,n){r.currentAd=i;try{if(r.adBlocked)Le();else{if(null==n){var s=o.getElementById("tt-container");"ShowOnlyBottomIfTeadsPresent"===e.VideoAdDisplayOption&&s&&(e.DivIdToFill="#divVideoStepAdBottom")}Se(),e.SecondsToWaitForVideoAdScroll&&t.setTimeout(function(){1!==r.statusCode&&(r.trySetStatus({code:0}),Le(),j(-48,r.hasScrolled?"1":"0"))},1e3*e.SecondsToWaitForVideoAdScroll),r.localize.usingLanguage(e.Language),null!=e.PageId&&0!==e.PageId&&(r.vsPageId=e.PageId),r.currentAd.HtmlString?"DoNotShowIfTeadsPresent"===e.VideoAdDisplayOption&&s?(j(-40,"CompetitionFound=tt-container"),Le()):(r.popup=ie(),r.trySetStatus({code:-1}),Pe(Ce())?te():r.addEventListener("scrollresize",te)):Le()}}catch(e){h.error(e.stack)}},n=function(e){if(0!==r.statusCode&&(r.videoAdResponseReceived=Date.now(),null!=e&&e.Data&&e.Data.videoAdContentResult)){r.videoAdContentResult=N=e.Data.videoAdContentResult,h.info(">>> Got "+r.videoAdContentResult.Ads.length+" ad(s)."),se().handleCmpResponse(r.videoAdContentResult.CmpSettings);var t=new Function(N.BlockingScript);try{t.call()}catch(e){h.error("PBS error",e)}N.AdReason&&h.info("* AdReason = "+N.AdReason),r.log=N.Log,re(),new oe(N,i,Le).displayAnAd()}};t.setTimeout(function(){r.videoAdResponseReceived||r.trySetStatus({code:0})},3e4),r.bidResponse?n({Data:{videoAdContentResult:r.bidResponse}}):C.adResponse?n(C.adResponse):r.jsonp(e,n)}function De(){var e,t=o.querySelector("div[id^='divVideoStepAdTop']"),i=o.querySelector("#divVideoStepAdBottom");(r.vsSentCallToAdWeb||(r.vsSentCallToAdWeb=!0,Ve(Ae())),t||i||ae)||(ae=!0,e=function(){De()},"loading"!==o.readyState?e():o.addEventListener("DOMContentLoaded",e))}function xe(){var e=o.createElement("link");e.async=!0,e.rel="stylesheet",e.type="text/css",e.href=s.videoAdCss,o.head.appendChild(e)}function Re(){de||(de=!0,xe(),function(){if(!r.VsSentLoadPageStat){r.VsSentLoadPageStat=!0;var e=null;r.rfc1&&(e=encodeURIComponent(o.cookie).substring(0,4e3)),j(r.isTablet?3:1,null,e)}De()}())}}(window,top,document);